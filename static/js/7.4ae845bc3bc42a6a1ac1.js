webpackJsonp([7],{"/rXD":function(e,t,s){"use strict";function o(e){s("jUU9")}Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),r=s.n(a),c=s("NYxO"),l=s("wtEF"),n=s("stGB"),i=s("qVsQ"),h={data:function(){return{message:"Game over,",messageText:"Your score is",graduationMessage:"You can't even finish the school.",schoolScoreMessage:"Your score is",userName:"",highestScore:"",hiscoreGreeting:"Your highest score is",exclamation:"!",lastScores:"",schoolScores:""}},components:{closeBtn:n.a},computed:r()({},Object(c.c)(["getTotalScore","getSchoolScore","getCurrentGameState","getDefaultUserName","getUserData"])),mounted:function(){this.$nextTick(function(){console.log("Game over"),this.getUserData.isAuthenticated?(this.userName=this.getUserData.name,console.log()):this.userName=this.getDefaultUserName,this.getCurrentGameState.gameInProgress?(this.lastScores=localStorage.getItem("lastScoresArray"),this.schoolScores=localStorage.getItem("schoolScores"),this.lastScores?this.addScoreToDatabase():(console.log("No local storage score array yet, creating one"),this.lastScores=[],localStorage.setItem("lastScoresArray",this.lastScores),this.addScoreToDatabase()),l.a.state.gameInProgress=!1):console.log("Nothing to record, play the game.")})},methods:{restartGame:function(){console.log("Restarting game"),l.a.commit("resetState"),this.$router.push("/game")},addScoreToDatabase:function(){console.log("Adding score"),"string"==typeof this.lastScores&&(this.lastScores=this.lastScores.split(",")),"string"==typeof this.schoolScores?this.schoolScores=this.schoolScores.split(","):this.schoolScores=[this.getSchoolScore],this.lastScores.push(this.getTotalScore),this.schoolScores.push(this.getSchoolScore),localStorage.setItem("lastScoresArray",this.lastScores),localStorage.setItem("schoolScores",this.schoolScores),this.getUserData.isAuthenticated?this.syncScoreInFirebase():console.log("Anonymous! To save results please register.")},syncScoreInFirebase:function(){console.log("Syncing score for uid "+this.getUserData.uid);var e=this.getUserData.uid;i.a.collection("users").where("uid","==",e).get().then(function(t){var s=void 0;return t.forEach(function(t){t.data().uid===e&&(s=t.id)}),s}).then(function(e){var t=i.a.collection("users").doc(e),s=localStorage.getItem("lastScoresArray"),o=localStorage.getItem("highestScore"),a=t.update({resultsArray:s,hiScore:o});return console.log("...updating user stats"),a}).catch(function(e){console.log("Error getting documents: ",e)})}}},g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"fill-height":"",id:"endGame"}},[s("v-layout",{attrs:{"align-space-around":"",column:""}},[s("v-spacer"),e._v(" "),s("closeBtn"),e._v(" "),s("v-flex",{staticClass:"user-name text-xs-center",attrs:{"d-flex":""}},[s("h1",[e._v(e._s(e.message)),s("br"),e._v(" "),s("span",[e._v(e._s(e.userName)+e._s(e.exclamation))])])]),e._v(" "),this.getCurrentGameState.schoolCompleted?e._e():s("v-flex",{staticClass:"message-school text-xs-center"},[s("h3",[e._v(e._s(e.graduationMessage))]),e._v(" "),s("h2",[e._v(e._s(e.schoolScoreMessage)+" "+e._s(e.getTotalScore))])]),e._v(" "),this.getCurrentGameState.schoolCompleted?s("v-flex",{staticClass:"message-game text-xs-center"},[s("h2",[e._v(e._s(e.messageText)+" "+e._s(e.getTotalScore))])]):e._e(),e._v(" "),s("v-layout",{attrs:{row:"","align-center":"","justify-space-around":""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","d-flex":""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"orange"},on:{click:e.restartGame}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("replay")])],1)],1),e._v(" "),s("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","d-flex":""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"purple darken-1",to:"/settings"}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("trending_up")])],1)],1)],1)],1)],1)},u=[],S={render:g,staticRenderFns:u},m=S,d=s("VU/8"),v=o,f=d(h,m,!1,v,"data-v-1131238a",null);t.default=f.exports},jUU9:function(e,t){}});
//# sourceMappingURL=7.4ae845bc3bc42a6a1ac1.js.map