{"version":3,"sources":["webpack:///static/js/5.e4caa6ba884ff25983ac.js","webpack:///./src/components/Login.vue","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?fb3b"],"names":["webpackJsonp","k6eQ","module","exports","xJsL","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","helpers_extends","extends_default","n","vuex_esm","firebaseInit","index_cjs","index_cjs_default","store","CloseBtn","Login","name","data","users","errorMessage","newUserBtnText","pageTitle","valid","nameRules","v","length","email","emailRules","test","password","passwordRules","confirmPassword","select","items","checkbox","components","closeButton","computed","comparePasswords","this","logInOrSignOut","answer","getUserAuthState","console","log","methods","getUserNameFromDB","uid","collection","where","get","then","querySnapshot","userName","forEach","doc","commit","catch","error","login","_this","a","auth","signInWithEmailAndPassword","response","user","tempName","newUser","isAuthenticated","$store","$router","push","err","dir","message","signOut","localStorage","removeItem","clear","$refs","form","reset","mounted","render","_vm","_h","$createElement","_c","_self","attrs","column","id","pa-2","pt-3","_v","dismissible","outline","type","_s","staticClass","d-flex","justify-center","xs8","align-center","ref","lazy-validation","model","callback","$$v","expression","rules","label","autocomplete","required","xs5","align-end","disabled","large","color","on","click","$event","preventDefault","dark","wrap","xs12","to","_e","staticRenderFns","esExports","components_Login","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/5.e4caa6ba884ff25983ac.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ \"k6eQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"xJsL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./src/components/firebaseInit.js\nvar firebaseInit = __webpack_require__(\"qVsQ\");\n\n// EXTERNAL MODULE: ./node_modules/firebase/app/dist/index.cjs.js\nvar index_cjs = __webpack_require__(\"yviF\");\nvar index_cjs_default = /*#__PURE__*/__webpack_require__.n(index_cjs);\n\n// EXTERNAL MODULE: ./node_modules/firebase/auth/dist/index.esm.js\nvar index_esm = __webpack_require__(\"dih4\");\n\n// EXTERNAL MODULE: ./src/store/store.js + 3 modules\nvar store = __webpack_require__(\"wtEF\");\n\n// EXTERNAL MODULE: ./src/components/CloseBtn.vue + 2 modules\nvar CloseBtn = __webpack_require__(\"stGB\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Login.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n/* harmony default export */ var Login = ({\n  name: 'login',\n  data: function data() {\n    return {\n      users: [],\n      errorMessage: '',\n      newUserBtnText: 'Create new user',\n      pageTitle: 'Log In',\n      valid: true,\n      name: '',\n      nameRules: [function (v) {\n        return !!v || 'Name is required';\n      }, function (v) {\n        return v && v.length <= 10 || 'Name must be less than 10 characters';\n      }],\n      email: '',\n      emailRules: [function (v) {\n        return !!v || 'E-mail is required';\n      }, function (v) {\n        return (/.+@.+/.test(v) || 'E-mail must be valid'\n        );\n      }],\n      password: '',\n      passwordRules: [function (v) {\n        return !!v || 'Password is required';\n      }, function (v) {\n        return v && v.length <= 12 || 'Password must be less than 12 characters';\n      }],\n      confirmPassword: '',\n      select: null,\n      items: ['Item 1', 'Item 2', 'Item 3', 'Item 4'],\n      checkbox: false\n    };\n  },\n  components: {\n    closeButton: CloseBtn[\"a\" /* default */]\n  },\n  computed: extends_default()({}, Object(vuex_esm[\"c\" /* mapGetters */])(['getError', 'getUserAuthState', 'getUserName']), {\n    comparePasswords: function comparePasswords() {\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true;\n    },\n    logInOrSignOut: function logInOrSignOut() {\n      var answer = void 0;\n      if (this.getUserAuthState) {\n        console.log('User exists');\n        answer = true;\n      } else {\n        // console.log('No user yet')\n        answer = false;\n      }\n      return answer;\n    }\n  }),\n  methods: {\n    /*\r\n    getUsersList () {\r\n      db.collection('users').get().then(querySnapshot => {\r\n        querySnapshot.forEach(doc => {\r\n          console.log(doc.id)\r\n          const data = {\r\n            'id': doc.id,\r\n            'name': doc.data().name,\r\n            'type': doc.data().type\r\n          }\r\n          console.log(data)\r\n          this.users.push(data)\r\n        })\r\n      })\r\n    },\r\n    */\n    getUserNameFromDB: function getUserNameFromDB(uid) {\n      // console.log(`Getting user name for uid ${uid}`)\n      firebaseInit[\"a\" /* default */].collection('users').where('uid', '==', uid).get().then(function (querySnapshot) {\n        var userName = void 0;\n        querySnapshot.forEach(function (doc) {\n          if (doc.data().uid === uid) {\n            userName = doc.data().name;\n          }\n        });\n        store[\"a\" /* default */].commit('setUserName', userName);\n        console.log('Setting user name: ' + userName);\n        return userName;\n      }).catch(function (error) {\n        console.log('Error getting documents: ', error);\n      });\n    },\n\n    login: function login() {\n      var _this = this;\n\n      if (this.email && this.password) {\n        // need some proper validation\n        index_cjs_default.a.auth().signInWithEmailAndPassword(this.email, this.password).then(function (response) {\n          console.log('You are logged in as');\n          console.log(response.user.email);\n          console.log(response.user.uid);\n          var tempName = _this.getUserNameFromDB(response.user.uid);\n          var newUser = {\n            isAuthenticated: true,\n            uid: response.user.uid,\n            name: tempName\n          };\n          _this.$store.commit('setUser', newUser);\n          _this.$router.push('/');\n        }, function (err) {\n          console.dir(err);\n          _this.errorMessage = err.message;\n        });\n        return true;\n      }\n    },\n    signOut: function signOut() {\n      index_cjs_default.a.auth().signOut().then(function () {\n        console.log('Signed Out');\n        localStorage.removeItem('highestScore');\n        localStorage.removeItem('lastScoresArray');\n        store[\"a\" /* default */].commit('setAuthState', false);\n      }, function (error) {\n        console.error('Sign Out Error', error);\n      });\n    },\n    /*\r\n    addNewUser () {\r\n      db.collection('users').add({\r\n        name: this.name\r\n        // type: this.email\r\n      })\r\n        .then(docRef => console.log(`User added`))\r\n        .catch(error => console.log(error))\r\n    }, */\n    clear: function clear() {\n      this.$refs.form.reset();\n    }\n  },\n  mounted: function mounted() {\n    console.log('Login page mounted');\n    /*\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig)\r\n    }\r\n    */\n    /*\r\n    let check = true\r\n    if (check) {\r\n      console.log('User authenticated')\r\n      const initializeAuth = new Promise(resolve => {\r\n      // this adds a hook for the initial auth-change event\r\n        firebase.auth().onAuthStateChanged(user => {\r\n          const currentUser = firebase.auth().currentUser\r\n          console.log(`Current user is ${currentUser.uid}`)\r\n        })\r\n      })\r\n      initializeAuth.then(function (user) {\r\n        console.log(`Current user is ${user}`)\r\n      }).catch((reason) => {\r\n        console.log(`Something went wrong ${reason}`)\r\n      })\r\n    } else {\r\n      console.log('No, user is not authentificated')\r\n    } */\n    /*\r\n    const initializeAuth = new Promise(resolve => {\r\n    // this adds a hook for the initial auth-change event\r\n      firebase.auth().onAuthStateChanged(user => {\r\n        const currentUser = firebase.auth().currentUser\r\n        console.log(`Current user is ${currentUser.uid}`)\r\n      })\r\n    })\r\n    initializeAuth.then(function () {\r\n      const currentUser = firebase.auth().currentUser\r\n      console.log(`Current user is ${currentUser.email}`)\r\n    }) */\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-997c2d6e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"column\":\"\",\"id\":\"login\",\"pa-2\":\"\",\"pt-3\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeButton'),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.errorMessage)+\"\\n  \")]),_vm._v(\" \"),_c('v-flex',{staticClass:\"page-title text-xs-center\",attrs:{\"d-flex\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"login-form\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs8\":\"\",\"d-flex\":\"\",\"align-center\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"type\":'email',\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.passwordRules,\"type\":'password',\"label\":\"Password\",\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\",\"align-end\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":!_vm.valid,\"type\":'submit',\"large\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.login($event)}}},[_vm._v(\"\\n        login\\n      \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\",\"align-end\":\"\"}},[_c('v-btn',{staticClass:\"button\",attrs:{\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n      clear\")])],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"info-text\",attrs:{\"d-flex\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"or\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"button\",attrs:{\"to\":\"/register\",\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.newUserBtnText)+\"\\n      \")]),_vm._v(\" \"),(this.logInOrSignOut)?_c('v-btn',{staticClass:\"button\",attrs:{\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.signOut}},[_vm._v(\"\\n      sign out\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_Login = (esExports);\n// CONCATENATED MODULE: ./src/components/Login.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"k6eQ\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-997c2d6e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  Login,\n  components_Login,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Login = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/5.e4caa6ba884ff25983ac.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-997c2d6e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-997c2d6e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-997c2d6e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-layout column id=\"login\" pa-2 pt-3>\r\n    <v-spacer></v-spacer>\r\n    <closeButton></closeButton>\r\n    <v-alert\r\n      :value=\"errorMessage\"\r\n      dismissible\r\n      outline\r\n      type=\"error\">\r\n      {{ errorMessage }}\r\n    </v-alert>\r\n    <v-flex d-flex class=\"page-title text-xs-center\">\r\n      <h1>{{ pageTitle }}</h1>\r\n    </v-flex>\r\n    <v-layout justify-center class=\"login-form\">\r\n      <v-flex xs8 d-flex align-center>\r\n      <v-form ref=\"form\" v-model=\"valid\"\r\n        lazy-validation>\r\n      <!--v-text-field\r\n        v-model=\"name\"\r\n        :rules=\"nameRules\"\r\n        :counter=\"10\"\r\n        label=\"Name\"\r\n        required\r\n      ></v-text-field-->\r\n      <v-text-field\r\n        v-model=\"email\"\r\n        :rules=\"emailRules\"\r\n        label=\"E-mail\"\r\n        :type=\"'email'\"\r\n        autocomplete=\"off\"\r\n        required\r\n      ></v-text-field>\r\n      <v-text-field\r\n        v-model=\"password\"\r\n        :rules=\"passwordRules\"\r\n        :type=\"'password'\"\r\n        label=\"Password\"\r\n        autocomplete=\"off\"\r\n        required\r\n      ></v-text-field>\r\n      <!--v-text-field\r\n        v-model=\"confirmPassword\"\r\n        :rules=\"[comparePasswords]\"\r\n        :type=\"'password'\"\r\n        label=\"Confirm password\"\r\n        autocomplete=\"off\"\r\n        required\r\n      ></v-text-field-->\r\n      <!--v-select\r\n        v-model=\"select\"\r\n        :items=\"items\"\r\n        :rules=\"[v => !!v || 'Item is required']\"\r\n        label=\"Item\"\r\n        required\r\n      ></v-select>\r\n      <v-checkbox\r\n        v-model=\"checkbox\"\r\n        :rules=\"[v => !!v || 'You must agree to continue!']\"\r\n        label=\"Do you agree?\"\r\n        required\r\n      ></v-checkbox-->\r\n    </v-form>\r\n      </v-flex>\r\n    </v-layout>\r\n    <!--v-layout justify-center>\r\n      <v-btn outline round\r\n        class=\"dashBtn\"\r\n        color=\"purple\"\r\n        @click=\"getUsersList\"\r\n        >Show users</v-btn>\r\n      <v-btn outline round\r\n        class=\"dashBtn\"\r\n        color=\"purple\">Remove user</v-btn>\r\n    </v-layout-->\r\n    <v-layout justify-center class=\"text-xs-center\">\r\n      <!--v-flex v-if=\"this.getUserAuthState.isAuthenticated\" xs5 d-flex align-end>\r\n        <v-btn\r\n          :type=\"'submit'\"\r\n          @click.prevent=\"login\"\r\n          class=\"button white--text\"\r\n          color=\"orange\">\r\n          Sign Out\r\n        </v-btn>\r\n      </v-flex-->\r\n\r\n      <v-flex xs5 d-flex align-end>\r\n        <v-btn :disabled=\"!valid\"\r\n          :type=\"'submit'\"\r\n          @click.prevent=\"login\"\r\n          large\r\n          class=\"button white--text\"\r\n          color=\"orange\">\r\n          login\r\n        </v-btn>\r\n      </v-flex>\r\n      <v-flex xs5 d-flex align-end>\r\n        <v-btn @click=\"clear\"\r\n        dark\r\n        large\r\n        class=\"button\"\r\n        color=\"purple darken-1\">\r\n        clear</v-btn>\r\n\r\n        <!--v-btn @click=\"signOut\"\r\n        v-if=\"this.logInOrSignOut\"\r\n        dark\r\n        class=\"button\"\r\n        color=\"purple darken-1\">\r\n        sign out</v-btn-->\r\n      </v-flex>\r\n    </v-layout>\r\n    <v-layout wrap class=\"text-xs-center\">\r\n      <v-flex d-flex align-center class=\"info-text\">\r\n      <span>or</span>\r\n      </v-flex>\r\n    <v-flex xs12>\r\n        <v-btn to='/register'\r\n          dark\r\n          large\r\n          class=\"button\"\r\n          color=\"purple darken-1\">\r\n          <!--v-icon medium color=\"white\">edit</v-icon-->\r\n          {{ newUserBtnText }}\r\n        </v-btn>\r\n        <v-btn @click=\"signOut\"\r\n        v-if=\"this.logInOrSignOut\"\r\n        dark\r\n        large\r\n        class=\"button\"\r\n        color=\"purple darken-1\">\r\n        sign out</v-btn>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport db from '../components/firebaseInit'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport store from '../store/store'\r\nimport closeButton from '../components/CloseBtn'\r\n\r\nexport default {\r\n  name: 'login',\r\n  data: () => ({\r\n    users: [],\r\n    errorMessage: '',\r\n    newUserBtnText: 'Create new user',\r\n    pageTitle: 'Log In',\r\n    valid: true,\r\n    name: '',\r\n    nameRules: [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters'\r\n    ],\r\n    email: '',\r\n    emailRules: [\r\n      v => !!v || 'E-mail is required',\r\n      v => /.+@.+/.test(v) || 'E-mail must be valid'\r\n    ],\r\n    password: '',\r\n    passwordRules: [\r\n      v => !!v || 'Password is required',\r\n      v => (v && v.length <= 12) || 'Password must be less than 12 characters'\r\n    ],\r\n    confirmPassword: '',\r\n    select: null,\r\n    items: [\r\n      'Item 1',\r\n      'Item 2',\r\n      'Item 3',\r\n      'Item 4'\r\n    ],\r\n    checkbox: false\r\n  }),\r\n  components: {\r\n    closeButton\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'getError',\r\n      'getUserAuthState',\r\n      'getUserName'\r\n    ]),\r\n    comparePasswords () {\r\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true\r\n    },\r\n    logInOrSignOut () {\r\n      let answer\r\n      if (this.getUserAuthState) {\r\n        console.log('User exists')\r\n        answer = true\r\n      } else {\r\n        // console.log('No user yet')\r\n        answer = false\r\n      }\r\n      return answer\r\n    }\r\n  },\r\n  methods: {\r\n    /*\r\n    getUsersList () {\r\n      db.collection('users').get().then(querySnapshot => {\r\n        querySnapshot.forEach(doc => {\r\n          console.log(doc.id)\r\n          const data = {\r\n            'id': doc.id,\r\n            'name': doc.data().name,\r\n            'type': doc.data().type\r\n          }\r\n          console.log(data)\r\n          this.users.push(data)\r\n        })\r\n      })\r\n    },\r\n    */\r\n    getUserNameFromDB (uid) {\r\n      // console.log(`Getting user name for uid ${uid}`)\r\n      db.collection('users').where('uid', '==', uid)\r\n        .get()\r\n        .then(function (querySnapshot) {\r\n          let userName\r\n          querySnapshot.forEach(function (doc) {\r\n            if (doc.data().uid === uid) {\r\n              userName = doc.data().name\r\n            }\r\n          })\r\n          store.commit('setUserName', userName)\r\n          console.log(`Setting user name: ${userName}`)\r\n          return userName\r\n        })\r\n        .catch(function (error) {\r\n          console.log('Error getting documents: ', error)\r\n        })\r\n    },\r\n    login: function () {\r\n      if (this.email && this.password) { // need some proper validation\r\n        firebase.auth().signInWithEmailAndPassword(this.email, this.password)\r\n          .then(\r\n            response => {\r\n              console.log(`You are logged in as`)\r\n              console.log(response.user.email)\r\n              console.log(response.user.uid)\r\n              let tempName = this.getUserNameFromDB(response.user.uid)\r\n              const newUser = {\r\n                isAuthenticated: true,\r\n                uid: response.user.uid,\r\n                name: tempName\r\n              }\r\n              this.$store.commit('setUser', newUser)\r\n              this.$router.push('/')\r\n            },\r\n            err => {\r\n              console.dir(err)\r\n              this.errorMessage = err.message\r\n            })\r\n        return true\r\n      }\r\n    },\r\n    signOut: () => {\r\n      firebase.auth().signOut().then(function () {\r\n        console.log('Signed Out')\r\n        localStorage.removeItem('highestScore')\r\n        localStorage.removeItem('lastScoresArray')\r\n        store.commit('setAuthState', false)\r\n      }, function (error) {\r\n        console.error('Sign Out Error', error)\r\n      })\r\n    },\r\n    /*\r\n    addNewUser () {\r\n      db.collection('users').add({\r\n        name: this.name\r\n        // type: this.email\r\n      })\r\n        .then(docRef => console.log(`User added`))\r\n        .catch(error => console.log(error))\r\n    }, */\r\n    clear () {\r\n      this.$refs.form.reset()\r\n    }\r\n  },\r\n  mounted () {\r\n    console.log(`Login page mounted`)\r\n    /*\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig)\r\n    }\r\n    */\r\n    /*\r\n    let check = true\r\n    if (check) {\r\n      console.log('User authenticated')\r\n      const initializeAuth = new Promise(resolve => {\r\n      // this adds a hook for the initial auth-change event\r\n        firebase.auth().onAuthStateChanged(user => {\r\n          const currentUser = firebase.auth().currentUser\r\n          console.log(`Current user is ${currentUser.uid}`)\r\n        })\r\n      })\r\n      initializeAuth.then(function (user) {\r\n        console.log(`Current user is ${user}`)\r\n      }).catch((reason) => {\r\n        console.log(`Something went wrong ${reason}`)\r\n      })\r\n    } else {\r\n      console.log('No, user is not authentificated')\r\n    } */\r\n    /*\r\n    const initializeAuth = new Promise(resolve => {\r\n    // this adds a hook for the initial auth-change event\r\n      firebase.auth().onAuthStateChanged(user => {\r\n        const currentUser = firebase.auth().currentUser\r\n        console.log(`Current user is ${currentUser.uid}`)\r\n      })\r\n    })\r\n    initializeAuth.then(function () {\r\n      const currentUser = firebase.auth().currentUser\r\n      console.log(`Current user is ${currentUser.email}`)\r\n    }) */\r\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/scss/index.scss';\r\n\r\n.login-form, .page-title, .info-text, .button {\r\n  font-family: $text-font;\r\n  // font-weight: 700;\r\n}\r\n.info-text {\r\n  color: $color-primary-0;\r\n  font-size: 1.4em;\r\n  font-weight: 700;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"column\":\"\",\"id\":\"login\",\"pa-2\":\"\",\"pt-3\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeButton'),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.errorMessage)+\"\\n  \")]),_vm._v(\" \"),_c('v-flex',{staticClass:\"page-title text-xs-center\",attrs:{\"d-flex\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"login-form\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs8\":\"\",\"d-flex\":\"\",\"align-center\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"type\":'email',\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.passwordRules,\"type\":'password',\"label\":\"Password\",\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\",\"align-end\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":!_vm.valid,\"type\":'submit',\"large\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.login($event)}}},[_vm._v(\"\\n        login\\n      \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\",\"align-end\":\"\"}},[_c('v-btn',{staticClass:\"button\",attrs:{\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n      clear\")])],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"text-xs-center\",attrs:{\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"info-text\",attrs:{\"d-flex\":\"\",\"align-center\":\"\"}},[_c('span',[_vm._v(\"or\")])]),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"button\",attrs:{\"to\":\"/register\",\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.newUserBtnText)+\"\\n      \")]),_vm._v(\" \"),(this.logInOrSignOut)?_c('v-btn',{staticClass:\"button\",attrs:{\"dark\":\"\",\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.signOut}},[_vm._v(\"\\n      sign out\")]):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-997c2d6e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}