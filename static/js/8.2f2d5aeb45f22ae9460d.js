webpackJsonp([8],{"/rXD":function(e,t,s){"use strict";function o(e){s("LDES")}Object.defineProperty(t,"__esModule",{value:!0});var r=s("Dd8w"),a=s.n(r),c=s("NYxO"),l=s("wtEF"),i=s("stGB"),h=s("qVsQ"),n={data:function(){return{message:"Game over,",messageText:"Your score is",graduationMessage:"You can't even finish the school.",schoolScoreMessage:"Your score is",userName:"",highestScore:null,hiscoreGreeting:"Your highest score is",exclamation:"!",lastScores:[],schoolScores:[]}},components:{closeBtn:i.a},computed:a()({},Object(c.c)(["getTotalScore","getSchoolScore","getCurrentGameState","getDefaultUserName","getUserData"])),mounted:function(){this.$nextTick(function(){console.log("Game over"),this.getUserData.isAuthenticated?this.userName=this.getUserData.name:this.userName=this.getDefaultUserName,this.getCurrentGameState.gameInProgress?(null===localStorage.getItem("highestScore")?(console.log("No local storage score array yet exist, creating one"),this.lastScores=[],this.schoolScores=[],this.highestScore=this.getTotalScore,localStorage.setItem("lastScoresArray",this.lastScores),localStorage.setItem("schoolScores",this.schoolScores),localStorage.setItem("highestScore",this.getTotalScore),this.addScoreToDatabase()):(this.lastScores=localStorage.getItem("lastScoresArray"),this.schoolScores=localStorage.getItem("schoolScores"),this.highestScore=localStorage.getItem("highestScore"),this.addScoreToDatabase()),l.a.state.gameInProgress=!1):console.log("Nothing to record, play the game.")})},methods:{restartGame:function(){console.log("Restarting game"),l.a.commit("resetState"),this.$router.push("/game")},addScoreToDatabase:function(){console.log("Adding score"),""===this.lastScores?this.lastScores=[]:this.lastScores=this.lastScores.split(","),""===this.schoolScores?this.schoolScores=[]:this.schoolScores=this.schoolScores.split(","),this.getTotalScore>this.highestScore?(this.highestScore=this.getTotalScore,localStorage.setItem("highestScore",this.getTotalScore)):console.log("Your score is not so high: "+this.getTotalScore),this.getCurrentGameState.schoolCompleted?(this.lastScores.push(this.getTotalScore),localStorage.setItem("lastScoresArray",this.lastScores),this.schoolScores.push(this.getSchoolScore),localStorage.setItem("schoolScores",this.schoolScores)):(this.schoolScores.push(this.getSchoolScore),localStorage.setItem("schoolScores",this.schoolScores)),this.getUserData.isAuthenticated?this.syncScoreInFirebase():console.log("Anonymous! To save results please register.")},syncScoreInFirebase:function(){console.log("Syncing score for uid "+this.getUserData.uid);var e=this.getUserData.uid;h.a.collection("users").where("uid","==",e).get().then(function(t){var s=void 0;return t.forEach(function(t){t.data().uid===e&&(s=t.id)}),s}).then(function(e){var t=h.a.collection("users").doc(e),s=localStorage.getItem("lastScoresArray"),o=localStorage.getItem("highestScore"),r=localStorage.getItem("schoolScores"),a=t.update({resultsArray:s,schoolResultsArray:r,hiScore:o});return console.log("...updating user stats"),a}).catch(function(e){console.log("Error getting documents: ",e)})}}},g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{id:"endGame"}},[s("closeBtn"),e._v(" "),s("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":"",wrap:""}},[s("v-flex",{staticClass:"user-name-game-end text-xs-center",attrs:{xs12:""}},[s("h1",[e._v(e._s(e.message)),s("br"),e._v(" "),s("span",[e._v(e._s(e.userName)+e._s(e.exclamation))])])]),e._v(" "),this.getCurrentGameState.schoolCompleted?e._e():s("v-flex",{staticClass:"message-school text-xs-center",attrs:{xs12:""}},[s("h3",[e._v(e._s(e.graduationMessage))]),e._v(" "),s("h2",[e._v(e._s(e.schoolScoreMessage)+" "+e._s(e.getTotalScore))])]),e._v(" "),this.getCurrentGameState.schoolCompleted?s("v-flex",{staticClass:"message-game text-xs-center",attrs:{xs12:""}},[s("h2",[e._v(e._s(e.messageText)+" "+e._s(e.getTotalScore))])]):e._e(),e._v(" "),s("v-layout",{attrs:{row:"","align-center":"","justify-space-around":""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{"d-flex":"",xs5:"",lg2:""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"orange"},on:{click:e.restartGame}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("replay")])],1)],1),e._v(" "),s("v-flex",{staticClass:"text-xs-center",attrs:{"d-flex":"",xs5:"",lg2:""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"purple darken-1",to:"/settings"}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("trending_up")])],1)],1)],1)],1)],1)},S=[],u={render:g,staticRenderFns:S},m=u,d=s("VU/8"),v=o,f=d(n,m,!1,v,"data-v-2c9c3778",null);t.default=f.exports},LDES:function(e,t){}});
//# sourceMappingURL=8.2f2d5aeb45f22ae9460d.js.map