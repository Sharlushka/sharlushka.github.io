webpackJsonp([5],{"g+oD":function(e,t,a){"use strict";function r(e){a("jF9h")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("BO1k"),n=a.n(s),o=a("Dd8w"),l=a.n(o),d=a("stGB"),c=a("NYxO"),i=a("qVsQ"),v={name:"Leaderboard",data:function(){return{title:"leaderboard",userName:null,leaderboard:[],userDataFromDB:[],noLeaderboardMessage:null}},components:{closeBtn:d.a},mounted:function(){var e=this;this.$nextTick(function(){console.log("Leaderboard mounted"),e.getUserData.isAuthenticated?(console.log("Getting leaderboard data from db..."),e.getDataForLeaderboard()):(e.userName=e.getDefaultUserName,e.noLeaderboardMessage="Hi, "+e.userName+", log in to view the leaderboard.")})},computed:l()({},Object(c.c)(["getDefaultUserName","getUserData","getMaxPossibleScore"])),methods:{getDataForLeaderboard:function(){var e=this;i.a.collection("users").orderBy("hiScore").get().then(function(t){t.forEach(function(t){var a={id:t.id,userName:t.data().name,hiScore:t.data().hiScore,resultsArray:t.data().resultsArray};e.userDataFromDB.push(a)})}).then(function(){var t=!0,a=!1,r=void 0;try{for(var s,o=n()(e.userDataFromDB);!(t=(s=o.next()).done);t=!0){var l=s.value,d=function(e,t){return e+t},c=l.resultsArray.split(",").map(Number),i=parseInt(c.reduce(d)/c.length),v=Math.floor(i/e.getMaxPossibleScore*100),u={id:l.id,userName:l.userName,hiScore:parseInt(l.hiScore),averageScore:i,percentFromMax:v,gamesPlayed:c.length};e.leaderboard.push(u)}}catch(e){a=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw r}}e.leaderboard.reverse()}).catch(function(e){console.log("Error getting documents: ",e)})}}},u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{column:"",id:"leaderboard"}},[a("v-flex",[a("closeBtn")],1),e._v(" "),a("v-flex",{staticClass:"text-xs-center py-4"},[a("h1",{staticClass:"leaderboard-title text-capitalize"},[e._v("\n        "+e._s(e.title)+"\n      ")])]),e._v(" "),a("v-flex",{staticClass:"leaderboard-legend text-xs-center pl-1 py-2"},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{xs1:""}},[a("v-icon",{attrs:{color:"purple darken-2"}},[e._v("import_export")])],1),e._v(" "),a("v-flex",{staticClass:"text-xs-left",attrs:{xs3:""}},[e._v("\n          Name\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          HiScore\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          Average\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          % Max\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          Games\n        ")])],1)],1),e._v(" "),e.noLeaderboardMessage?a("v-flex",{staticClass:"leader-board-message text-xs-center",attrs:{"py-4":""}},[e._v("\n      "+e._s(e.noLeaderboardMessage)+"\n    ")]):e._e(),e._v(" "),null===e.noLeaderboardMessage?a("v-flex",{staticClass:"leaderboard text-xs-center"},e._l(e.leaderboard,function(t,r){return a("v-layout",{key:r,staticClass:"leaderboard-item",class:{"orange--text":e.getUserData.name===t.userName},attrs:{"py-2":""}},[a("v-flex",{staticClass:"text-xs-center",attrs:{xs1:""}},[e._v("\n          "+e._s(r+1)+"\n        ")]),e._v(" "),a("v-flex",{staticClass:"text-xs-left",attrs:{xs3:""}},[e._v("\n          "+e._s(t.userName)+"\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          "+e._s(t.hiScore)+"\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          "+e._s(t.averageScore)+"\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          "+e._s(t.percentFromMax)+"\n        ")]),e._v(" "),a("v-flex",{attrs:{xs2:""}},[e._v("\n          "+e._s(t.gamesPlayed)+"\n        ")])],1)})):e._e()],1)},x=[],f={render:u,staticRenderFns:x},_=f,m=a("VU/8"),g=r,b=m(v,_,!1,g,"data-v-731be193",null);t.default=b.exports},jF9h:function(e,t){}});
//# sourceMappingURL=5.43c824d3e0565e871e4f.js.map