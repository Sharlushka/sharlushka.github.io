webpackJsonp([9],{"5Bhn":function(e,r){},"7G8Q":function(e,r,n){"use strict";r.a={apiKey:"AIzaSyD_vlh1xLKAAZPtwDcEvBuHNWRja6J0Zo0",authDomain:"sharlushka.firebaseapp.com",databaseURL:"https://sharlushka.firebaseio.com",projectId:"sharlushka",storageBucket:"sharlushka.appspot.com",messagingSenderId:"1059637672503"}},NHnr:function(e,r,n){"use strict";function a(e){n("5Bhn"),n("t/LY")}function t(e){O.a.collection("users").where("uid","==",e).get().then(function(r){var n=void 0;return r.forEach(function(r){r.data().uid===e&&(n=r.data().name)}),P.a.commit("setUserName",n),n}).catch(function(e){console.log("Error getting documents: ",e)})}Object.defineProperty(r,"__esModule",{value:!0});var o=n("//Fk"),i=n.n(o),s=(n("u7Vc"),n("7+uW")),l=n("3EgV"),c=n.n(l),u=n("Dd8w"),f=n.n(u),d={name:"NetworkCheck",data:function(){return{offlineMessage:!1}},computed:{networkStatus:function(){return this.isOnline?"ok":null}}},v=function(){var e=this,r=e.$createElement,n=e._self._c||r;return this.networkStatus?e._e():n("v-dialog",{attrs:{width:"20em"},model:{value:e.offlineMessage,callback:function(r){e.offlineMessage=r},expression:"offlineMessage"}},[n("v-btn",{attrs:{slot:"activator",small:"",icon:"",fab:"",dark:""},slot:"activator"},[n("v-icon",{staticClass:"blink",attrs:{size:"2em",color:"orange"}},[e._v("\n          cloud_off\n        ")])],1),e._v(" "),n("v-card",[n("v-card-text",{staticClass:"text-xs-center offline-message-text"},[e._v("\n          Check your connection to save results.\n        ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(r){e.offlineMessage=!1}}},[n("v-icon",{attrs:{size:"2em",color:"orange"}},[e._v("done")])],1)],1)],1)],1)},m=[],h={render:v,staticRenderFns:m},y=h,g=n("VU/8"),p=g(d,y,!1,null,null,null),A=p.exports,b=n("NYxO"),k={name:"App",data:function(){return{navDrawer:!1,userName:"Anonymous",navDrawerLinks:[{path:"/help",icon:"trending_up",text:"School results & help"},{path:"/settings",icon:"equalizer",text:"User stats"},{path:"/login",icon:"exit_to_app",text:"Log in/out"}]}},components:{NetworkCheck:A},computed:f()({},Object(b.c)(["getTotalScore","getUserName"]),{gameName:function(){return"Sharlushka"},currentUserName:function(){return""===this.getUserName?"Anonymous":this.getUserName}}),mounted:function(){this.$nextTick(function(){console.log("App started.")})},methods:{manipulateDrawer:function(){this.navDrawer=!this.navDrawer},updateOnlineStatus:function(){navigator.onLine?console.log("online"):console.log("offline")}}},C=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("v-app",[["Game"].includes(e.$route.name)?n("v-toolbar",{staticClass:"text-xs-center",attrs:{app:"",dense:"",color:"purple darken-2"}},[n("span",{staticClass:"score pl-3"},[e._v("\n        "+e._s(e.getTotalScore)+"\n      ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-title",{staticClass:"game-name ml-0"},[n("router-link",{attrs:{to:{path:"/"}}},[e._v("\n        "+e._s(e.gameName)+"\n        ")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("NetworkCheck"),e._v(" "),n("v-toolbar-items",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{fab:"",dark:"",small:"",flat:""},on:{click:e.manipulateDrawer}},[n("v-icon",{attrs:{large:""}},[e._v("more_vert")])],1)],1)],1):e._e(),e._v(" "),n("v-navigation-drawer",{staticClass:"navigation-drawer",attrs:{temporary:"",width:"295",fixed:"",right:"",app:""},model:{value:e.navDrawer,callback:function(r){e.navDrawer=r},expression:"navDrawer"}},[n("v-list",[n("v-list-tile",{staticClass:"pb-3",on:{click:e.manipulateDrawer}},[n("v-list-tile-action",[n("v-flex",{staticClass:"text-xs-center"},[n("v-icon",{attrs:{large:"",color:"orange"}},[e._v("keyboard_backspace")])],1)],1),e._v(" "),n("v-list-tile-title",{staticClass:"drawer-menu-item"},[e._v("Back")])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-action",[n("v-flex",{staticClass:"text-xs-center"},[n("NetworkCheck")],1)],1),e._v(" "),n("v-list-tile-content",{staticClass:"drawer-menu-item pa-0 user-name"},[e._v("Hi,Â "+e._s(e.currentUserName)+".")])],1),e._v(" "),e._l(e.navDrawerLinks,function(r){return n("v-list-tile",{key:r.path,attrs:{to:{path:r.path}}},[n("v-list-tile-action",[n("v-flex",{staticClass:"text-xs-center"},[n("v-icon",{attrs:{color:"purple darken-2"}},[e._v("\n                "+e._s(r.icon)+"\n              ")])],1)],1),e._v(" "),n("v-list-tile-title",{staticClass:"drawer-menu-item subheading"},[e._v("\n            "+e._s(r.text)+"\n          ")])],1)})],2)],1),e._v(" "),n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":"","ma-0":"","pa-0":"",id:"app"}},[n("transition",{attrs:{name:"custom-classes-transition",mode:"out-in","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOutLeft"}},[n("router-view")],1)],1)],1)],1)},w=[],_={render:C,staticRenderFns:w},x=_,S=n("VU/8"),T=a,N=S(k,x,!1,T,null,null),U=N.exports,D=n("/ocq");s.default.use(D.a);var I=new D.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",name:"MainPage",component:function(){return n.e(1).then(n.bind(null,"US8T"))}},{path:"/register",name:"Register",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"dIqY"))}},{path:"/settings",name:"Settings",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"niH5"))}},{path:"/game",name:"Game",component:function(){return n.e(2).then(n.bind(null,"tZZY"))}},{path:"/endgame",name:"EndGame",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"/rXD"))}},{path:"/help",name:"Help",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"9YsO"))}},{path:"/login",name:"login",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"xJsL"))}}]}),P=n("wtEF"),E=n("ydGU");Object(E.a)("service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var R=n("A5Ul"),G=n.n(R),V=n("7G8Q"),O=n("qVsQ"),F=n("yviF"),L=n.n(F);n("dih4");L.a.apps.length||L.a.initializeApp(V.a),L.a.firestore().settings({timestampsInSnapshots:!0});var B=new i.a(function(e){L.a.auth().onAuthStateChanged(function(r){r?(M.setUser(r),e(r)):console.log("No user!")})}),M={userUid:null,authenticated:function(){return B.then(function(e){return e&&!e.isAnonymous})},setUser:function(e){this.userUid=e.uid,console.log("User set "+e.email)}};this.getUserAuthState&&""!==this.getUserData.name||M.authenticated().then(function(e){var r=t(M.userUid);if(e){var n={isAuthenticated:!0,uid:M.userUid,name:r};P.a.commit("setUser",n)}}).catch(function(e){console.log("Error "+e)}),s.default.config.productionTip=!1,s.default.use(c.a,{iconfont:"md"}),s.default.use(G.a),s.default.use(n("Z5Pw")),new s.default({el:"#app",store:P.a,router:I,components:{App:U},template:"<App/>",render:function(e){return e(U)}})},qVsQ:function(e,r,n){"use strict";var a=n("yviF"),t=n.n(a),o=(n("881v"),n("7G8Q"));t.a.apps.length||t.a.initializeApp(o.a),t.a.firestore().settings({timestampsInSnapshots:!0}),r.a=t.a.firestore()},"t/LY":function(e,r){},wtEF:function(e,r,n){"use strict";var a=n("7+uW"),t=n("NYxO"),o=n("BO1k"),i=n.n(o),s={getCurrentGameState:function(e){return{currentTurn:e.currentGameTurn,rollsCountForButton:e.rollCount,schoolCompleted:e.schoolCompleted,currentGameTurn:e.currentGameTurn,currentRollCount:e.rollCount,turnCompleted:e.turnCompleted,gameEnded:e.gameEnded,diceRollInProgress:e.diceRollInProgress,gameCheck:e.gameCheck,gameInProgress:e.gameInProgress}},getProcessing:function(e){return e.processing},getError:function(e){return e.error},getDiceIds:function(e){var r=e.scoreArray.slice(0,e.diceArray.length+1),n=[],a=!0,t=!1,o=void 0;try{for(var s,l=i()(r);!(a=(s=l.next()).done);a=!0){var c=s.value;n.push(c.icon)}}catch(e){t=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(t)throw o}}return n},getSchoolArray:function(e){return e.scoreArray.slice(0,e.diceArray.length+1)},getCombinationArray:function(e){return e.scoreArray.slice(e.diceArray.length+1,e.scoreArray.length)},getMaxPossibleScore:function(e){return e.maxPossibleScore},getUserAuthState:function(e){return e.user.isAuthenticated},getUserName:function(e){return e.user.name},getDiceArray:function(e){return e.diceArray},getTotalScore:function(e){return e.schoolScoreTotal+e.gameTotal},getSchoolScore:function(e){return e.schoolScoreTotal},getDefaultUserName:function(e){return e.defaultUserName},getUserData:function(e){return e.user},debugInfo:function(e){for(var r in e.diceArray)if(e.diceArray[r].chosen){var n={chosen:e.diceArray[r].chosen,firstDice:e.diceArray[0].chosen};return n}},chosenDiceArray:function(e){return e.diceArray.filter(function(e){return e.chosen})},currentValuesInScoreArray:function(e){return e.scoreArray.filter(function(e){return""!==e.value&&!e.final})}},l={computeScore:function(e){if(!e.turnCompleted){var r=[[],[],[],[],[],[]];if(e.combinationArray.length>0){for(var n in e.combinationArray)switch(e.combinationArray[n]){case 1:r[0].push(e.combinationArray[n]);break;case 2:r[1].push(e.combinationArray[n]);break;case 3:r[2].push(e.combinationArray[n]);break;case 4:r[3].push(e.combinationArray[n]);break;case 5:r[4].push(e.combinationArray[n]);break;case 6:r[5].push(e.combinationArray[n]);break;default:return console.log("Can't create array to analyse"),!1}if(e.schoolCompleted){var a=[],t=[],o=[],i=[],s=function(e,r){return e+r};for(var l in r){var c=r[l][0];if(c){if(2===r[c-1].length&&a.push(c),3===r[c-1].length&&t.push(c),4===r[c-1].length&&o.push(c),(a.length>=1||t.length>=1)&&!e.scoreArray[6].final){var u=0;if(a.length>0&&(u=2*a[0],e.scoreArray[6].value=u),a.length>1?(u=a[0]>a[1]?2*a[0]:2*a[1],e.scoreArray[6].value=u):1===a.length&&(u=2*a[0],e.scoreArray[6].value=u),1===t.length){var f=2*t[0];e.scoreArray[6].value=f>u?f:u}}else e.scoreArray[6].final||(e.scoreArray[6].value="");if(2!==a.length||e.scoreArray[7].final)if(1!==a.length||1!==t.length||e.scoreArray[7].final)a.length<2&&!e.scoreArray[7].final&&(e.scoreArray[7].value="");else{var d=2*a[0]+2*t[0];e.scoreArray[7].value=d}else e.scoreArray[7].value=2*a[0]+2*a[1];1!==t.length||e.scoreArray[8].final?e.scoreArray[8].final||(e.scoreArray[8].value=""):e.scoreArray[8].value=3*t[0],1!==t.length||1!==a.length||e.scoreArray[9].final?e.scoreArray[9].final||(e.scoreArray[9].value=""):e.scoreArray[9].value=3*t[0]+2*a[0],o>=1?(e.scoreArray[10].final||(e.scoreArray[10].value=4*o[0]),e.scoreArray[8].final||(e.scoreArray[8].value=3*o[0]),e.scoreArray[6].final||(e.scoreArray[6].value=2*o[0])):e.scoreArray[10].final||(e.scoreArray[10].value=""),5!==r[c-1].length||e.scoreArray[11].final?e.scoreArray[11].final||(e.scoreArray[11].value=""):(e.scoreArray[11].value=5*c+80,e.scoreArray[10].final||(e.scoreArray[10].value=4*r[c-1]),e.scoreArray[8].final||(e.scoreArray[8].value=3*r[c-1]),e.scoreArray[6].final||(e.scoreArray[6].value=2*r[c-1])),1===r[c-1].length?(i.push(c),5===i.length&&(i.sort(),1!==i[0]||5!==i[i.length-1]||e.scoreArray[12].final?2!==i[0]||6!==i[i.length-1]||e.scoreArray[13].final||(e.scoreArray[13].value=i.reduce(s)):e.scoreArray[12].value=i.reduce(s))):e.scoreArray[12].final?e.scoreArray[13].final||(e.scoreArray[13].value=""):e.scoreArray[12].value="";var v=e.combinationArray.reduce(s);e.scoreArray[14].final?e.scoreArray[14].final||(e.scoreArray[14].value=""):e.scoreArray[14].value=v}}}else{var m=void 0;for(var h in r){var y=r[h][0];y||!0===e.scoreArray[h].final||(e.scoreArray[h].value=""),m=3===r[h].length?0:(r[h].length-3)*r[h][0],y&&!0!==e.scoreArray[y-1].final&&(e.scoreArray[y-1].value=m)}}}else if(0===e.combinationArray.length){console.log("Ain't got shit, captain");for(var g in e.scoreArray)!0!==e.scoreArray[g].final&&(e.scoreArray[g].value="")}else alert("Error!")}},setDiceChosenState:function(e,r){for(var n in e.diceArray)if(e.diceArray[n].id===r)if(e.diceArray[n].chosen){e.diceArray[n].chosen=!1;var a=e.diceArray[n].value,t=e.combinationArray.indexOf(a);e.combinationArray.splice(t,1)}else e.combinationArray.push(e.diceArray[n].value),e.diceArray[n].chosen=!0},rollDice:function(e){e.newTurn=!1,e.diceRollInProgress=!0,e.rollCount--;var r=!0,n=!1,a=void 0;try{for(var t,o=i()(e.diceArray);!(r=(t=o.next()).done);r=!0){var s=t.value;if(!s.chosen){var l=function(e){return Math.floor(Math.random()*Math.floor(e))}(6)+1;s.value=l,s.currentIcon=e.scoreArray[l-1].icon}}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}if(0===e.rollCount&&e.currentGameTurn<=6&&!e.turnCompleted){for(var c=[],u=0;u<=5;u++)""!==e.scoreArray[u].value&&e.scoreArray[u].final||c.push(u+1);var f=!0,d=!1,v=void 0;try{for(var m,h=i()(c);!(f=(m=h.next()).done);f=!0){var y=m.value;for(var g in e.diceArray)e.diceArray[g].value===y&&(console.log("All ok, one found at "+e.diceArray[g].id+" with value "+e.diceArray[g].value),e.gameCheck=!0)}}catch(e){d=!0,v=e}finally{try{!f&&h.return&&h.return()}finally{if(d)throw v}}}if(e.currentGameTurn<=6&&0===e.rollCount&&!e.turnCompleted&&!e.gameCheck)return console.log("You can't even finish the school... Score is: "+e.schoolScoreTotal),e.gameEnded=!0,!1;e.diceBoxHidden=!1},nextTurn:function(e){e.newTurn=!0,e.gameCheck=!1,e.zeroCheck=!1,e.diceBoxHidden=!0,e.currentGameTurn++,e.turnCompleted=!1,e.rollCount=3;for(var r in e.diceArray)e.diceArray[r].value="#",e.diceArray[r].chosen=!1;e.combinationArray=[]},stopDiceRollProcess:function(e){e.diceRollInProgress=!1},resetState:function(e){e.newTurn=!0,e.diceRolled=!0,e.schoolScoreTotal=0,e.gameTotal=0,e.schoolCompleted=!1,e.currentGameTurn=1,e.maxGameTurns=33,e.rollCount=3,e.gameCheck=!1,e.turnCompleted=!1,e.gameInProgress=!1,e.gameEnded=!1,e.combinationArray=[];var r=!0,n=!1,a=void 0;try{for(var t,o=i()(e.scoreArray);!(r=(t=o.next()).done);r=!0){var s=t.value;s.value="",s.final=!1,s.displayValues&&(s.displayValues=[])}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}var l=!0,c=!1,u=void 0;try{for(var f,d=i()(e.diceArray);!(l=(f=d.next()).done);l=!0){var v=f.value;v.value="#",v.chosen=!1}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}},setUser:function(e,r){e.user=r},setUserName:function(e,r){e.user.name=r},setAuthState:function(e,r){r||(e.user.isAuthenticated=!1,e.user.uid="",e.user.name="")},SET_PROCESSING:function(e,r){e.processing=r},SET_ERROR:function(e,r){e.error=r},CLEAR_ERROR:function(e){e.error=null}};a.default.use(t.a);var c=function(){return{user:{isAuthenticated:!1,uid:null,name:""},debug:!1,error:"No error",processing:!1,defaultUserName:"Anonymous",newTurn:!0,diceRollInProgress:!1,schoolScoreTotal:0,gameTotal:0,schoolCompleted:!1,currentGameTurn:1,gameInProgress:!1,maxGameTurns:33,rollCount:3,gameCheck:!1,turnCompleted:!1,gameEnded:!1,maxPossibleScore:879,combinationArray:[],scoreArray:[{value:"",final:!1,id:"ones",icon:"diceOnes"},{value:"",final:!1,id:"twos",icon:"diceTwos"},{value:"",final:!1,id:"threes",icon:"diceThrees"},{value:"",final:!1,id:"fours",icon:"diceFours"},{value:"",final:!1,id:"fives",icon:"diceFives"},{value:"",final:!1,id:"sixes",icon:"diceSixes"},{value:"",displayValues:[],final:!1,id:"pair",fullName:"Pair"},{value:"",displayValues:[],final:!1,id:"twoPairs",fullName:"Two Pairs"},{value:"",displayValues:[],final:!1,id:"threeOfAKind",fullName:"Three O.A.K"},{value:"",displayValues:[],final:!1,id:"full",fullName:"Full"},{value:"",displayValues:[],final:!1,id:"quads",fullName:"Quads"},{value:"",displayValues:[],final:!1,id:"poker",fullName:"Poker"},{value:"",displayValues:[],final:!1,id:"small",fullName:"Small"},{value:"",displayValues:[],final:!1,id:"large",fullName:"Large"},{value:"",displayValues:[],final:!1,id:"chance",fullName:"Chance"}],diceArray:[{value:"#",chosen:!1,id:"first",currentIcon:""},{value:"#",chosen:!1,id:"second",currentIcon:""},{value:"#",chosen:!1,id:"third",currentIcon:""},{value:"#",chosen:!1,id:"fourth",currentIcon:""},{value:"#",chosen:!1,id:"fifth",currentIcon:""}]}}(),u={setCurrentIcon:function(e){return(0,e.commit)("setCurrentIcon")},resetGameState:function(e){return(0,e.commit)("resetState")},computeScore:function(e){return(0,e.commit)("computeScore")},rollDice:function(e){return(0,e.commit)("rollDice")},nextTurn:function(e){return(0,e.commit)("nextTurn")}};r.a=new t.a.Store({state:c,getters:s,mutations:l,actions:u})}},["NHnr"]);
//# sourceMappingURL=app.91765a05c5897ac5fcdb.js.map