webpackJsonp([4],{k6eQ:function(e,t){},xJsL:function(e,t,s){"use strict";function r(e){s("k6eQ")}Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("NYxO"),l=s("qVsQ"),i=s("yviF"),u=s.n(i),c=(s("dih4"),s("wtEF")),d=s("stGB"),m={name:"login",data:function(){return{users:[],errorMessage:"",newUserBtnText:"Create new user",pageTitle:"Log In",valid:!0,name:"",nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length<=12||"Password must be less than 12 characters"}],confirmPassword:"",select:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1}},components:{closeButton:d.a},computed:n()({},Object(o.c)(["getError","getUserAuthState","getUserName"]),{comparePasswords:function(){return this.password===this.confirmPassword||"Passwords do not match"},logInOrSignOut:function(){var e=void 0;return this.getUserAuthState?(console.log("User exists"),e=!0):e=!1,e}}),methods:{getUserNameFromDB:function(e){l.a.collection("users").where("uid","==",e).get().then(function(t){var s=void 0;return t.forEach(function(t){t.data().uid===e&&(s=t.data().name)}),c.a.commit("setUserName",s),console.log("Setting user name: "+s),s}).catch(function(e){console.log("Error getting documents: ",e)})},login:function(){var e=this;if(this.email&&this.password)return u.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(t){console.log("You are logged in as"),console.log(t.user.email),console.log(t.user.uid);var s=e.getUserNameFromDB(t.user.uid),r={isAuthenticated:!0,uid:t.user.uid,name:s};e.$store.commit("setUser",r),e.$router.push("/")},function(t){console.dir(t),e.errorMessage=t.message}),!0},signOut:function(){u.a.auth().signOut().then(function(){console.log("Signed Out"),localStorage.removeItem("highestScore"),localStorage.removeItem("lastScoresArray"),c.a.commit("setAuthState",!1)},function(e){console.error("Sign Out Error",e)})},clear:function(){this.$refs.form.reset()}},mounted:function(){console.log("Login page mounted")}},f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{column:"",id:"login","pa-2":"","pt-3":""}},[s("v-spacer"),e._v(" "),s("closeButton"),e._v(" "),s("v-alert",{attrs:{value:e.errorMessage,dismissible:"",outline:"",type:"error"}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]),e._v(" "),s("v-flex",{staticClass:"page-title text-xs-center",attrs:{"d-flex":""}},[s("h1",[e._v(e._s(e.pageTitle))])]),e._v(" "),s("v-layout",{staticClass:"login-form",attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs8:"","d-flex":"","align-center":""}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",type:"email",autocomplete:"off",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("v-text-field",{attrs:{rules:e.passwordRules,type:"password",label:"Password",autocomplete:"off",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1),e._v(" "),s("v-layout",{staticClass:"text-xs-center",attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs5:"","d-flex":"","align-end":""}},[s("v-btn",{staticClass:"button white--text",attrs:{disabled:!e.valid,type:"submit",large:"",color:"orange"},on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("\n        login\n      ")])],1),e._v(" "),s("v-flex",{attrs:{xs5:"","d-flex":"","align-end":""}},[s("v-btn",{staticClass:"button",attrs:{dark:"",large:"",color:"purple darken-1"},on:{click:e.clear}},[e._v("\n      clear")])],1)],1),e._v(" "),s("v-layout",{staticClass:"text-xs-center",attrs:{wrap:""}},[s("v-flex",{staticClass:"info-text",attrs:{"d-flex":"","align-center":""}},[s("span",[e._v("or")])]),e._v(" "),s("v-flex",{attrs:{xs12:""}},[s("v-btn",{staticClass:"button",attrs:{to:"/register",dark:"",large:"",color:"purple darken-1"}},[e._v("\n        "+e._s(e.newUserBtnText)+"\n      ")]),e._v(" "),this.logInOrSignOut?s("v-btn",{staticClass:"button",attrs:{dark:"",large:"",color:"purple darken-1"},on:{click:e.signOut}},[e._v("\n      sign out")]):e._e()],1)],1)],1)},g=[],v={render:f,staticRenderFns:g},p=v,h=s("VU/8"),x=r,w=h(m,p,!1,x,"data-v-997c2d6e",null);t.default=w.exports}});
//# sourceMappingURL=4.70b399a96106db75e17f.js.map