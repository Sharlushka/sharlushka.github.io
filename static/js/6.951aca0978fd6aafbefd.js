webpackJsonp([6],{"/rXD":function(e,t,s){"use strict";function a(e){s("m/Xt")}Object.defineProperty(t,"__esModule",{value:!0});var r=s("Dd8w"),o=s.n(r),c=s("NYxO"),n=s("wtEF"),l=s("stGB"),i=s("qVsQ"),g={data:function(){return{message:"Game over,",messageText:"Your score is",graduationMessage:"You can't even finish the school.",schoolScoreMessage:"Your score is",userName:"",highestScore:"",hiscoreGreeting:"Your highest score is",exclamation:"!",lastScoresArray:""}},components:{closeBtn:l.a},computed:o()({},Object(c.c)(["getTotalScore","getCurrentGameState","getDefaultUserName","getUserData"])),mounted:function(){this.$nextTick(function(){console.log("Game over"),this.getUserData.isAuthenticated?(this.userName=this.getUserData.name,console.log()):this.userName=this.getDefaultUserName,this.getCurrentGameState.gameInProgress?(this.lastScoresArray=localStorage.getItem("lastScoresArray"),this.lastScoresArray?this.addScoreToDatabase():(console.log("No local storage score array yet, creating one"),this.lastScoresArray=[],localStorage.setItem("lastScoresArray",this.lastScoresArray),this.addScoreToDatabase()),n.a.state.gameInProgress=!1):console.log("Nothing to record, play the game.")})},methods:{restartGame:function(){console.log("Restarting game"),n.a.commit("resetState"),this.$router.push("/game")},addScoreToDatabase:function(){console.log("Adding score"),"string"==typeof this.lastScoresArray&&(this.lastScoresArray=this.lastScoresArray.split(",")),this.lastScoresArray.push(this.getTotalScore),localStorage.setItem("lastScoresArray",this.lastScoresArray),this.getUserData.isAuthenticated?this.syncScoreInFirebase():console.log("Anonymous! To save results please register.")},syncScoreInFirebase:function(){console.log("Syncing score for uid "+this.getUserData.uid);var e=this.getUserData.uid;i.a.collection("users").where("uid","==",e).get().then(function(t){var s=void 0;return t.forEach(function(t){t.data().uid===e&&(s=t.id)}),s}).then(function(e){var t=i.a.collection("users").doc(e),s=localStorage.getItem("lastScoresArray"),a=localStorage.getItem("highestScore"),r=t.update({resultsArray:s,hiScore:a});return console.log("...updating user stats"),r}).catch(function(e){console.log("Error getting documents: ",e)})}}},u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"fill-height":"",id:"endGame"}},[s("v-layout",{attrs:{"align-space-around":"",column:""}},[s("v-spacer"),e._v(" "),s("closeBtn"),e._v(" "),s("v-flex",{staticClass:"user-name text-xs-center",attrs:{"d-flex":""}},[s("h1",[e._v(e._s(e.message)),s("br"),e._v(" "),s("span",[e._v(e._s(e.userName)+e._s(e.exclamation))])])]),e._v(" "),this.getCurrentGameState.schoolCompleted?e._e():s("v-flex",{staticClass:"message-school text-xs-center"},[s("h3",[e._v(e._s(e.graduationMessage))]),e._v(" "),s("h2",[e._v(e._s(e.schoolScoreMessage)+" "+e._s(e.getTotalScore))])]),e._v(" "),this.getCurrentGameState.schoolCompleted?s("v-flex",{staticClass:"message-game text-xs-center"},[s("h2",[e._v(e._s(e.messageText)+" "+e._s(e.getTotalScore))])]):e._e(),e._v(" "),s("v-layout",{attrs:{row:"","align-center":"","justify-space-around":""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","d-flex":""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"orange"},on:{click:e.restartGame}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("replay")])],1)],1),e._v(" "),s("v-flex",{staticClass:"text-xs-center",attrs:{xs5:"","d-flex":""}},[s("v-btn",{attrs:{ripple:"",large:"",color:"purple darken-1",to:"/settings"}},[s("v-icon",{attrs:{medium:"",color:"white"}},[e._v("equalizer")])],1)],1)],1)],1)],1)},h=[],m={render:u,staticRenderFns:h},d=m,v=s("VU/8"),S=a,f=v(g,d,!1,S,"data-v-4541fbce",null);t.default=f.exports},"m/Xt":function(e,t){}});
//# sourceMappingURL=6.951aca0978fd6aafbefd.js.map