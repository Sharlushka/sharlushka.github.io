{"version":3,"sources":["webpack:///static/js/3.c83ad1ad3d6b4b9fa037.js","webpack:///./src/components/Login.vue","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?a05e"],"names":["webpackJsonp","wP5S","module","exports","xJsL","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","helpers_extends","extends_default","n","vuex_esm","firebaseInit","index_cjs","index_cjs_default","store","CloseBtn","Login","name","data","logginIn","loggingOut","users","errorMessage","undefined","newUserBtnText","pageTitle","valid","nameRules","v","length","email","emailRules","test","password","passwordRules","confirmPassword","select","items","checkbox","components","closeBtn","computed","comparePasswords","this","methods","setLoginLoadingState","getUserNameFromDB","uid","collection","where","get","then","querySnapshot","userName","forEach","doc","commit","console","log","catch","error","login","_this","a","auth","signInWithEmailAndPassword","response","user","tempName","newUser","isAuthenticated","$store","$router","push","err","message","signOut","_this2","localStorage","removeItem","clear","$refs","form","reset","mounted","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fluid","id","_v","column","d-flex","dismissible","outline","relative","type","_s","justify-center","xs9","align-center","py-4","ref","lazy-validation","model","callback","$$v","expression","rules","label","autocomplete","required","color","row","wrap","xs5","disabled","loading","large","ripple","on","click","$event","preventDefault","xs12","getUserAuthState","to","staticRenderFns","esExports","components_Login","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/3.c83ad1ad3d6b4b9fa037.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"wP5S\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"xJsL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./src/components/firebaseInit.js\nvar firebaseInit = __webpack_require__(\"qVsQ\");\n\n// EXTERNAL MODULE: ./node_modules/firebase/app/dist/index.cjs.js\nvar index_cjs = __webpack_require__(\"yviF\");\nvar index_cjs_default = /*#__PURE__*/__webpack_require__.n(index_cjs);\n\n// EXTERNAL MODULE: ./node_modules/firebase/auth/dist/index.esm.js\nvar index_esm = __webpack_require__(\"dih4\");\n\n// EXTERNAL MODULE: ./src/store/store.js + 3 modules\nvar store = __webpack_require__(\"wtEF\");\n\n// EXTERNAL MODULE: ./src/components/CloseBtn.vue + 2 modules\nvar CloseBtn = __webpack_require__(\"stGB\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Login.vue\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n/* harmony default export */ var Login = ({\n  name: 'login',\n  data: function data() {\n    return {\n      // loader: null,\n      logginIn: false,\n      loggingOut: false,\n      users: [],\n      errorMessage: undefined,\n      newUserBtnText: 'Add user',\n      pageTitle: 'Log In',\n      valid: true,\n      name: '',\n      nameRules: [function (v) {\n        return !!v || 'Name is required';\n      }, function (v) {\n        return v && v.length <= 10 || 'Name must be less than 10 characters';\n      }],\n      email: '',\n      emailRules: [function (v) {\n        return !!v || 'E-mail is required';\n      }, function (v) {\n        return (/.+@.+/.test(v) || 'E-mail must be valid'\n        );\n      }],\n      password: '',\n      passwordRules: [function (v) {\n        return !!v || 'Password is required';\n      }, function (v) {\n        return v && v.length <= 12 || 'Password must be less than 12 characters';\n      }],\n      confirmPassword: '',\n      select: null,\n      items: ['Item 1', 'Item 2', 'Item 3', 'Item 4'],\n      checkbox: false\n    };\n  },\n  components: {\n    closeBtn: CloseBtn[\"a\" /* default */]\n  },\n  computed: extends_default()({}, Object(vuex_esm[\"c\" /* mapGetters */])(['getError', 'getUserAuthState', 'getUserName']), {\n    comparePasswords: function comparePasswords() {\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true;\n    }\n    /*\r\n    logInOrSignOut () {\r\n      let answer\r\n      if (this.getUserAuthState) {\r\n        console.log('User exists')\r\n        answer = true\r\n      } else {\r\n        // console.log('No user yet')\r\n        answer = false\r\n      }\r\n      return answer\r\n    } */\n\n  }),\n  methods: {\n    /*\r\n    getUsersList () {\r\n      db.collection('users').get().then(querySnapshot => {\r\n        querySnapshot.forEach(doc => {\r\n          console.log(doc.id)\r\n          const data = {\r\n            'id': doc.id,\r\n            'name': doc.data().name,\r\n            'type': doc.data().type\r\n          }\r\n          console.log(data)\r\n          this.users.push(data)\r\n        })\r\n      })\r\n    },\r\n    */\n    setLoginLoadingState: function setLoginLoadingState() {\n      this.logginIn = !this.logginIn;\n      return true;\n    },\n    getUserNameFromDB: function getUserNameFromDB(uid) {\n      // console.log(`Getting user name for uid ${uid}`)\n      firebaseInit[\"a\" /* default */].collection('users').where('uid', '==', uid).get().then(function (querySnapshot) {\n        var userName = void 0;\n        querySnapshot.forEach(function (doc) {\n          if (doc.data().uid === uid) {\n            userName = doc.data().name;\n          }\n        });\n        store[\"a\" /* default */].commit('setUserName', userName);\n        console.log('Setting user name: ' + userName);\n        return userName;\n      }).catch(function (error) {\n        console.log('Error getting documents: ', error);\n      });\n    },\n\n    login: function login() {\n      var _this = this;\n\n      this.errorMessage = undefined;\n      if (this.email && this.password) {\n        // need some proper validation\n        this.setLoginLoadingState();\n        index_cjs_default.a.auth().signInWithEmailAndPassword(this.email, this.password).then(function (response) {\n          console.log('You are logged in as');\n          console.log(response.user.email);\n          console.log(response.user.uid);\n          var tempName = _this.getUserNameFromDB(response.user.uid);\n          var newUser = {\n            isAuthenticated: true,\n            uid: response.user.uid,\n            name: tempName\n          };\n          _this.$store.commit('setUser', newUser);\n          _this.$router.push('/');\n        }, function (err) {\n          console.log(err.message);\n          _this.errorMessage = err.message;\n          _this.setLoginLoadingState();\n        });\n        return true;\n      }\n    },\n    signOut: function signOut() {\n      var _this2 = this;\n\n      this.loggingOut = !this.loggingOut;\n      index_cjs_default.a.auth().signOut().then(function () {\n        console.log('Signed Out');\n        localStorage.removeItem('highestScore');\n        localStorage.removeItem('lastScoresArray');\n        localStorage.removeItem('schoolScores');\n        store[\"a\" /* default */].commit('setAuthState', false);\n        store[\"a\" /* default */].commit('setUserName', 'Anonymous');\n        _this2.loggingOut = !_this2.loggingOut;\n        _this2.$router.push('/');\n      }).catch(function (error) {\n        console.error('Sign Out Error', error);\n        _this2.loggingOut = !_this2.loggingOut;\n      });\n    },\n\n    /*\r\n    addNewUser () {\r\n      db.collection('users').add({\r\n        name: this.name\r\n        // type: this.email\r\n      })\r\n        .then(docRef => console.log(`User added`))\r\n        .catch(error => console.log(error))\r\n    }, */\n    clear: function clear() {\n      this.$refs.form.reset();\n    }\n  },\n  mounted: function mounted() {\n    console.log('Login page mounted');\n    /*\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig)\r\n    }\r\n    */\n    /*\r\n    let check = true\r\n    if (check) {\r\n      console.log('User authenticated')\r\n      const initializeAuth = new Promise(resolve => {\r\n      // this adds a hook for the initial auth-change event\r\n        firebase.auth().onAuthStateChanged(user => {\r\n          const currentUser = firebase.auth().currentUser\r\n          console.log(`Current user is ${currentUser.uid}`)\r\n        })\r\n      })\r\n      initializeAuth.then(function (user) {\r\n        console.log(`Current user is ${user}`)\r\n      }).catch((reason) => {\r\n        console.log(`Something went wrong ${reason}`)\r\n      })\r\n    } else {\r\n      console.log('No, user is not authentificated')\r\n    } */\n    /*\r\n    const initializeAuth = new Promise(resolve => {\r\n    // this adds a hook for the initial auth-change event\r\n      firebase.auth().onAuthStateChanged(user => {\r\n        const currentUser = firebase.auth().currentUser\r\n        console.log(`Current user is ${currentUser.uid}`)\r\n      })\r\n    })\r\n    initializeAuth.then(function () {\r\n      const currentUser = firebase.auth().currentUser\r\n      console.log(`Current user is ${currentUser.email}`)\r\n    }) */\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dc5b8ca8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"text-xs-center\",attrs:{\"fluid\":\"\",\"id\":\"login\"}},[_c('closeBtn'),_vm._v(\" \"),_c('v-layout',{attrs:{\"column\":\"\"}},[_c('v-flex',{attrs:{\"d-flex\":\"\"}},[_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"relative\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.errorMessage)+\"\\n        \")])],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"page-title py-4\",attrs:{\"d-flex\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"login-form py-4\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs9\":\"\",\"d-flex\":\"\",\"align-center\":\"\",\"py-4\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"type\":'email',\"autocomplete\":\"off\",\"required\":\"\",\"color\":\"purple accent-4\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.passwordRules,\"type\":'password',\"label\":\"Password\",\"autocomplete\":\"off\",\"required\":\"\",\"color\":\"purple accent-4\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":_vm.logginIn,\"type\":'submit',\"loading\":_vm.logginIn,\"large\":\"\",\"ripple\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.login($event)}}},[_vm._v(\"\\n            login\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":_vm.valid,\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n            clear\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"info-text\",attrs:{\"xs12\":\"\",\"py-4\":\"\",\"align-center\":\"\"}},[_c('v-divider')],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"loading\":_vm.loggingOut,\"disabled\":!this.getUserAuthState,\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.signOut}},[_vm._v(\"\\n              log out\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"to\":\"/register\",\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.newUserBtnText)+\"\\n          \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_Login = (esExports);\n// CONCATENATED MODULE: ./src/components/Login.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"wP5S\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  Login,\n  components_Login,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Login = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.c83ad1ad3d6b4b9fa037.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dc5b8ca8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dc5b8ca8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-container fluid id=\"login\" class=\"text-xs-center\">\r\n<!-- Close button -->\r\n    <closeBtn></closeBtn>\r\n<!-- Error message -->\r\n    <v-layout column>\r\n      <v-flex d-flex>\r\n        <v-alert\r\n          :value=\"errorMessage\"\r\n          dismissible\r\n          outline\r\n          relative\r\n          type=\"error\">\r\n          {{ errorMessage }}\r\n        </v-alert>\r\n      </v-flex>\r\n<!-- Page title -->\r\n      <v-flex d-flex class=\"page-title py-4\">\r\n        <h1>{{ pageTitle }}</h1>\r\n      </v-flex>\r\n<!-- Input form -->\r\n      <v-layout justify-center class=\"login-form py-4\">\r\n        <v-flex xs9 d-flex align-center py-4>\r\n          <v-form ref=\"form\" v-model=\"valid\"\r\n            lazy-validation>\r\n            <v-text-field\r\n              v-model=\"email\"\r\n              :rules=\"emailRules\"\r\n              label=\"E-mail\"\r\n              :type=\"'email'\"\r\n              autocomplete=\"off\"\r\n              required\r\n              color=\"purple accent-4\">\r\n            </v-text-field>\r\n            <v-text-field\r\n              v-model=\"password\"\r\n              :rules=\"passwordRules\"\r\n              :type=\"'password'\"\r\n              label=\"Password\"\r\n              autocomplete=\"off\"\r\n              required\r\n              color=\"purple accent-4\">\r\n            </v-text-field>\r\n          </v-form>\r\n        </v-flex>\r\n      </v-layout>\r\n<!-- Buttons layout -->\r\n      <v-layout row wrap justify-center>\r\n        <v-flex d-flex xs5>\r\n          <v-btn @click.prevent=\"login\"\r\n            :disabled=\"logginIn\"\r\n            :type=\"'submit'\"\r\n            :loading=\"logginIn\"\r\n            large\r\n            ripple\r\n            class=\"button white--text\"\r\n            color=\"orange\">\r\n            login\r\n          </v-btn>\r\n        </v-flex>\r\n\r\n        <v-flex d-flex xs5>\r\n          <v-btn @click=\"clear\"\r\n            :disabled=\"valid\"\r\n            large\r\n            ripple\r\n            class=\"button white--text\"\r\n            color=\"purple darken-1\">\r\n            clear\r\n          </v-btn>\r\n        </v-flex>\r\n\r\n        <v-flex xs12 py-4 align-center class=\"info-text\">\r\n          <v-divider></v-divider>\r\n        </v-flex>\r\n\r\n        <v-flex d-flex xs5>\r\n          <v-btn @click=\"signOut\"\r\n            :loading=\"loggingOut\"\r\n            :disabled=\"!this.getUserAuthState\"\r\n            large\r\n            ripple\r\n            class=\"button white--text\"\r\n            color=\"purple darken-1\">\r\n              log out\r\n          </v-btn>\r\n        </v-flex>\r\n\r\n        <v-flex d-flex xs5>\r\n          <v-btn to='/register'\r\n            large\r\n            ripple\r\n            class=\"button white--text\"\r\n            color=\"purple darken-1\">\r\n            {{ newUserBtnText }}\r\n          </v-btn>\r\n        </v-flex>\r\n      </v-layout>\r\n<!-- End of buttons layout -->\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport db from '../components/firebaseInit'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport store from '../store/store'\r\nimport closeBtn from '../components/CloseBtn'\r\n\r\nexport default {\r\n  name: 'login',\r\n  data: () => ({\r\n    // loader: null,\r\n    logginIn: false,\r\n    loggingOut: false,\r\n    users: [],\r\n    errorMessage: undefined,\r\n    newUserBtnText: 'Add user',\r\n    pageTitle: 'Log In',\r\n    valid: true,\r\n    name: '',\r\n    nameRules: [\r\n      v => !!v || 'Name is required',\r\n      v => (v && v.length <= 10) || 'Name must be less than 10 characters'\r\n    ],\r\n    email: '',\r\n    emailRules: [\r\n      v => !!v || 'E-mail is required',\r\n      v => /.+@.+/.test(v) || 'E-mail must be valid'\r\n    ],\r\n    password: '',\r\n    passwordRules: [\r\n      v => !!v || 'Password is required',\r\n      v => (v && v.length <= 12) || 'Password must be less than 12 characters'\r\n    ],\r\n    confirmPassword: '',\r\n    select: null,\r\n    items: [\r\n      'Item 1',\r\n      'Item 2',\r\n      'Item 3',\r\n      'Item 4'\r\n    ],\r\n    checkbox: false\r\n  }),\r\n  components: {\r\n    closeBtn\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'getError',\r\n      'getUserAuthState',\r\n      'getUserName'\r\n    ]),\r\n    comparePasswords () {\r\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true\r\n    }\r\n    /*\r\n    logInOrSignOut () {\r\n      let answer\r\n      if (this.getUserAuthState) {\r\n        console.log('User exists')\r\n        answer = true\r\n      } else {\r\n        // console.log('No user yet')\r\n        answer = false\r\n      }\r\n      return answer\r\n    } */\r\n  },\r\n  methods: {\r\n    /*\r\n    getUsersList () {\r\n      db.collection('users').get().then(querySnapshot => {\r\n        querySnapshot.forEach(doc => {\r\n          console.log(doc.id)\r\n          const data = {\r\n            'id': doc.id,\r\n            'name': doc.data().name,\r\n            'type': doc.data().type\r\n          }\r\n          console.log(data)\r\n          this.users.push(data)\r\n        })\r\n      })\r\n    },\r\n    */\r\n    setLoginLoadingState () {\r\n      this.logginIn = !this.logginIn\r\n      return true\r\n    },\r\n    getUserNameFromDB (uid) {\r\n      // console.log(`Getting user name for uid ${uid}`)\r\n      db.collection('users').where('uid', '==', uid)\r\n        .get()\r\n        .then(function (querySnapshot) {\r\n          let userName\r\n          querySnapshot.forEach(function (doc) {\r\n            if (doc.data().uid === uid) {\r\n              userName = doc.data().name\r\n            }\r\n          })\r\n          store.commit('setUserName', userName)\r\n          console.log(`Setting user name: ${userName}`)\r\n          return userName\r\n        })\r\n        .catch(function (error) {\r\n          console.log('Error getting documents: ', error)\r\n        })\r\n    },\r\n    login: function () {\r\n      this.errorMessage = undefined\r\n      if (this.email && this.password) { // need some proper validation\r\n        this.setLoginLoadingState()\r\n        firebase.auth().signInWithEmailAndPassword(this.email, this.password)\r\n          .then(\r\n            response => {\r\n              console.log(`You are logged in as`)\r\n              console.log(response.user.email)\r\n              console.log(response.user.uid)\r\n              let tempName = this.getUserNameFromDB(response.user.uid)\r\n              const newUser = {\r\n                isAuthenticated: true,\r\n                uid: response.user.uid,\r\n                name: tempName\r\n              }\r\n              this.$store.commit('setUser', newUser)\r\n              this.$router.push('/')\r\n            },\r\n            err => {\r\n              console.log(err.message)\r\n              this.errorMessage = err.message\r\n              this.setLoginLoadingState()\r\n            })\r\n        return true\r\n      }\r\n    },\r\n    signOut () {\r\n      this.loggingOut = !this.loggingOut\r\n      firebase.auth().signOut().then(() => {\r\n        console.log('Signed Out')\r\n        localStorage.removeItem('highestScore')\r\n        localStorage.removeItem('lastScoresArray')\r\n        localStorage.removeItem('schoolScores')\r\n        store.commit('setAuthState', false)\r\n        store.commit('setUserName', 'Anonymous')\r\n        this.loggingOut = !this.loggingOut\r\n        this.$router.push('/')\r\n      }).catch(error => {\r\n        console.error('Sign Out Error', error)\r\n        this.loggingOut = !this.loggingOut\r\n      })\r\n    },\r\n    /*\r\n    addNewUser () {\r\n      db.collection('users').add({\r\n        name: this.name\r\n        // type: this.email\r\n      })\r\n        .then(docRef => console.log(`User added`))\r\n        .catch(error => console.log(error))\r\n    }, */\r\n    clear () {\r\n      this.$refs.form.reset()\r\n    }\r\n  },\r\n  mounted () {\r\n    console.log(`Login page mounted`)\r\n    /*\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig)\r\n    }\r\n    */\r\n    /*\r\n    let check = true\r\n    if (check) {\r\n      console.log('User authenticated')\r\n      const initializeAuth = new Promise(resolve => {\r\n      // this adds a hook for the initial auth-change event\r\n        firebase.auth().onAuthStateChanged(user => {\r\n          const currentUser = firebase.auth().currentUser\r\n          console.log(`Current user is ${currentUser.uid}`)\r\n        })\r\n      })\r\n      initializeAuth.then(function (user) {\r\n        console.log(`Current user is ${user}`)\r\n      }).catch((reason) => {\r\n        console.log(`Something went wrong ${reason}`)\r\n      })\r\n    } else {\r\n      console.log('No, user is not authentificated')\r\n    } */\r\n    /*\r\n    const initializeAuth = new Promise(resolve => {\r\n    // this adds a hook for the initial auth-change event\r\n      firebase.auth().onAuthStateChanged(user => {\r\n        const currentUser = firebase.auth().currentUser\r\n        console.log(`Current user is ${currentUser.uid}`)\r\n      })\r\n    })\r\n    initializeAuth.then(function () {\r\n      const currentUser = firebase.auth().currentUser\r\n      console.log(`Current user is ${currentUser.email}`)\r\n    }) */\r\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../assets/scss/index.scss';\r\n\r\n#login {\r\n  height: 100%;\r\n}\r\n\r\n.login-form, .page-title, .info-text, .button {\r\n  font-family: $text-font;\r\n  // font-family: 'Courier New', Courier, monospace;\r\n  // font-weight: 700;\r\n}\r\n.info-text {\r\n  color: $color-primary-0;\r\n  font-size: 1.4em;\r\n  font-weight: 700;\r\n}\r\n\r\n.custom-loader {\r\n    animation: loader 1s infinite;\r\n    display: flex;\r\n  }\r\n  @-moz-keyframes loader {\r\n    from {\r\n      transform: rotate(0);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  @-webkit-keyframes loader {\r\n    from {\r\n      transform: rotate(0);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  @-o-keyframes loader {\r\n    from {\r\n      transform: rotate(0);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  @keyframes loader {\r\n    from {\r\n      transform: rotate(0);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"text-xs-center\",attrs:{\"fluid\":\"\",\"id\":\"login\"}},[_c('closeBtn'),_vm._v(\" \"),_c('v-layout',{attrs:{\"column\":\"\"}},[_c('v-flex',{attrs:{\"d-flex\":\"\"}},[_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"relative\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.errorMessage)+\"\\n        \")])],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"page-title py-4\",attrs:{\"d-flex\":\"\"}},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"login-form py-4\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs9\":\"\",\"d-flex\":\"\",\"align-center\":\"\",\"py-4\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"type\":'email',\"autocomplete\":\"off\",\"required\":\"\",\"color\":\"purple accent-4\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.passwordRules,\"type\":'password',\"label\":\"Password\",\"autocomplete\":\"off\",\"required\":\"\",\"color\":\"purple accent-4\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":_vm.logginIn,\"type\":'submit',\"loading\":_vm.logginIn,\"large\":\"\",\"ripple\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.login($event)}}},[_vm._v(\"\\n            login\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"disabled\":_vm.valid,\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n            clear\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"info-text\",attrs:{\"xs12\":\"\",\"py-4\":\"\",\"align-center\":\"\"}},[_c('v-divider')],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"loading\":_vm.loggingOut,\"disabled\":!this.getUserAuthState,\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.signOut}},[_vm._v(\"\\n              log out\\n          \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"d-flex\":\"\",\"xs5\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"to\":\"/register\",\"large\":\"\",\"ripple\":\"\",\"color\":\"purple darken-1\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.newUserBtnText)+\"\\n          \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dc5b8ca8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}