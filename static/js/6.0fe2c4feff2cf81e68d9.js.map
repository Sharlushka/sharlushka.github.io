{"version":3,"sources":["webpack:///static/js/6.0fe2c4feff2cf81e68d9.js","webpack:///./src/components/Settings.vue","webpack:///src/components/Settings.vue","webpack:///./src/components/Settings.vue?014a"],"names":["webpackJsonp","0KBs","module","exports","niH5","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","get_iterator","get_iterator_default","n","helpers_extends","extends_default","store","vuex_esm","CloseBtn","firebaseInit","Settings","name","data","userName","helpTitle","helpButtonText","highestScore","hiscoreGreeting","exclamation","lastScoresHeadingPartOne","lastScoresHeadingPartTwo","userScoresArray","lastScoresToDisplay","userGamesPlayed","chartData","labels","series","chartOptions","lineSmooth","newStats","gamesPlayed","msg","maxPossibleScore","percentFromMax","averageScore","components","closeBtn","computed","mounted","console","log","this","getUserData","isAuthenticated","localStorage","getItem","lastScoresString","split","getDefaultUserName","assembleLastScoresArray","slice","length","getMaxPossibleScore","computeAverageScore","computePercentFromMax","prepareLabelsForChart","methods","restartGame","state","commit","$router","push","numOfLabels","lastLabelToDisplay","labelsArray","reverse","setUserScoreDataFromDB","uid","collection","where","get","then","querySnapshot","scoreArray","forEach","doc","resultsArray","setItem","catch","error","arrayToReduce","scoreSum","accumulator","currentValue","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","parseInt","err","return","reduce","result","Math","floor","render","_vm","_h","$createElement","_c","_self","attrs","fill-height","id","align-space-around","column","_v","staticClass","_s","_e","ratio","type","options","d-flex","row","wrap","justify-space-around","py-2","_l","index","key","xs4","sm1","ma-0","item","align-center","lg2","ripple","block","large","color","on","click","medium","to","staticRenderFns","esExports","components_Settings","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/6.0fe2c4feff2cf81e68d9.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ \"0KBs\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"niH5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/core-js/get-iterator.js\nvar get_iterator = __webpack_require__(\"BO1k\");\nvar get_iterator_default = /*#__PURE__*/__webpack_require__.n(get_iterator);\n\n// EXTERNAL MODULE: ./node_modules/babel-runtime/helpers/extends.js\nvar helpers_extends = __webpack_require__(\"Dd8w\");\nvar extends_default = /*#__PURE__*/__webpack_require__.n(helpers_extends);\n\n// EXTERNAL MODULE: ./src/store/store.js + 3 modules\nvar store = __webpack_require__(\"wtEF\");\n\n// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js\nvar vuex_esm = __webpack_require__(\"NYxO\");\n\n// EXTERNAL MODULE: ./src/components/CloseBtn.vue + 2 modules\nvar CloseBtn = __webpack_require__(\"stGB\");\n\n// EXTERNAL MODULE: ./src/components/firebaseInit.js\nvar firebaseInit = __webpack_require__(\"qVsQ\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Settings.vue\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n // for reset state button\n\n\n\n\n/* harmony default export */ var Settings = ({\n  name: 'Settings', // change to statss\n  data: function data() {\n    return {\n      userName: '',\n      helpTitle: 'About',\n      helpButtonText: 'Help!',\n      highestScore: '',\n      hiscoreGreeting: 'Your highest score is',\n      exclamation: '.', // some over-engineering\n      lastScoresHeadingPartOne: 'Most recent',\n      lastScoresHeadingPartTwo: 'scores are',\n      userScoresArray: '',\n      lastScoresToDisplay: '',\n      userGamesPlayed: '',\n      chartData: {\n        labels: [],\n        series: []\n        // labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],\n        // series: [[333, 125, 256, 368, 129, 234, 623, 546, 345, 324, 34, 342]]\n      },\n      chartOptions: {\n        lineSmooth: false\n      },\n      newStats: {\n        gamesPlayed: {\n          msg: 'Games played',\n          value: ''\n        },\n        maxPossibleScore: {\n          msg: 'Max possible score is',\n          value: ''\n        },\n        percentFromMax: {\n          msg: 'Percent from max score ~',\n          value: ''\n        },\n        averageScore: {\n          msg: 'Your average score equals',\n          value: ''\n        }\n      }\n    };\n  },\n\n  components: {\n    closeBtn: CloseBtn[\"a\" /* default */]\n  },\n  computed: extends_default()({}, Object(vuex_esm[\"c\" /* mapGetters */])(['getDefaultUserName', 'getUserData', 'getMaxPossibleScore'])),\n  mounted: function mounted() {\n    console.log('Settings mounted'); // change to about\n    // check if user is authenticated\n    // let assembledArray\n    // this.lastScores = [512, 345, 534]\n    if (!this.getUserData.isAuthenticated) {\n      console.log('You are anonymous!');\n      this.userName = this.getDefaultUserName;\n      this.highestScore = localStorage.getItem('highestScore');\n      this.userScoresArray = this.assembleLastScoresArray();\n    } else {\n      console.log('You are existing user!');\n      // this.setUserScoreDataFromDB(this.getUserData.uid)\n      this.highestScore = localStorage.getItem('highestScore');\n      this.userName = this.getUserData.name;\n      /*\r\n      if (!this.userName || this.userName === '') {\r\n        this.userName = this.getDefaultUserName\r\n      }\r\n      */\n      var lastScoresString = localStorage.getItem('lastScoresArray');\n      // if one played at least one full game then there is an array\n      // with the last score, which is the highest and\n      // it is in the local storage after visiting the 'endGame' page\n      if (lastScoresString) {\n        this.userScoresArray = lastScoresString.split(',');\n      }\n    }\n    if (this.userScoresArray) {\n      this.lastScoresToDisplay = this.userScoresArray.slice(0).slice(-12);\n    }\n    this.newStats.gamesPlayed.value = this.userScoresArray.length;\n    this.newStats.maxPossibleScore.value = this.getMaxPossibleScore;\n    this.newStats.averageScore.value = this.computeAverageScore();\n    this.newStats.percentFromMax.value = this.computePercentFromMax();\n    if (this.userScoresArray.length) {\n      this.chartData.labels = this.prepareLabelsForChart(this.userScoresArray.length);\n      this.chartData.series = [this.lastScoresToDisplay];\n    }\n  },\n\n  methods: {\n    restartGame: function restartGame(state) {\n      console.log('Restarting.');\n      store[\"a\" /* default */].commit('resetState');\n      this.$router.push('/game');\n    },\n    prepareLabelsForChart: function prepareLabelsForChart(numOfLabels) {\n      // console.log(`Preparing labels ${typeof numOfLabels}`)\n      var resultsToDisplay = 12; // Twelve results for now\n      var lastLabelToDisplay = numOfLabels - resultsToDisplay;\n      var labelsArray = [];\n      if (numOfLabels >= resultsToDisplay) {\n        while (numOfLabels !== lastLabelToDisplay) {\n          labelsArray.push(numOfLabels);\n          numOfLabels--;\n        }\n        return labelsArray.reverse();\n      } else {\n        while (numOfLabels !== 0) {\n          labelsArray.push(numOfLabels);\n          numOfLabels--;\n          console.log('Scaaary..');\n        }\n        return labelsArray.reverse();\n      }\n    },\n    assembleLastScoresArray: function assembleLastScoresArray() {\n      console.log('Preparing array');\n      // this.lastScores = localStorage.getItem('lastScoresArray')\n      var lastScoresString = localStorage.getItem('lastScoresArray');\n      if (!lastScoresString) {\n        console.log('You have to play at least one game to calculate stats');\n        return false;\n      } else {\n        return lastScoresString.split(',');\n      }\n    },\n    setUserScoreDataFromDB: function setUserScoreDataFromDB(uid) {\n      console.log('Getting user scores for uid ' + uid);\n      firebaseInit[\"a\" /* default */].collection('users').where('uid', '==', uid).get().then(function (querySnapshot) {\n        var scoreArray = void 0;\n\n        querySnapshot.forEach(function (doc) {\n          // doc.data() is never undefined for query doc snapshots\n          if (doc.data().uid === uid) {\n            scoreArray = doc.data().resultsArray;\n          }\n        });\n        return scoreArray;\n      }).then(function (scoreArray) {\n        localStorage.setItem('lastScoresArray', scoreArray);\n        console.log('Setting users score array to local storage ' + scoreArray);\n      }).catch(function (error) {\n        console.log('Error getting documents: ', error);\n      });\n    },\n    computeAverageScore: function computeAverageScore() {\n      // let lastScores = [333, 125, 256, 368, -12, 234, 623, 546, 345, 324, 34, 342]\n      if (this.userScoresArray) {\n        var arrayToReduce = [];\n        var scoreSum = function scoreSum(accumulator, currentValue) {\n          return accumulator + currentValue;\n        };\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = get_iterator_default()(this.userScoresArray), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var value = _step.value;\n\n            arrayToReduce.push(parseInt(value));\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        console.log('User scores array: ' + this.userScoresArray);\n        if (arrayToReduce.length > 0) {\n          return parseInt(arrayToReduce.reduce(scoreSum) / arrayToReduce.length);\n        } else {\n          return 0;\n        }\n      }\n    },\n    computePercentFromMax: function computePercentFromMax() {\n      var result = Math.floor(this.newStats.averageScore.value / this.getMaxPossibleScore * 100);\n      if (result) {\n        return result + '%';\n      } else {\n        return false;\n      }\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42b174b2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Settings.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"id\":\"gameSettings\"}},[_c('v-layout',{attrs:{\"align-space-around\":\"\",\"column\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeBtn'),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\"},[_c('v-layout',{attrs:{\"column\":\"\"}},[_c('h1',{staticClass:\"help-title\"},[_vm._v(_vm._s(_vm.helpTitle))]),_vm._v(\" \"),_c('h2',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.userName)+\"!\")]),_vm._v(\" \"),(_vm.highestScore)?_c('h3',{staticClass:\"hi-score\"},[_vm._v(_vm._s(_vm.hiscoreGreeting)+\" \"+_vm._s(_vm.highestScore)+_vm._s(_vm.exclamation))]):_vm._e()])],1),_vm._v(\" \"),_c('v-flex',[_c('chartist',{attrs:{\"ratio\":\"ct-major-tenth\",\"type\":\"Bar\",\"data\":_vm.chartData,\"options\":_vm.chartOptions}})],1),_vm._v(\" \"),(_vm.lastScoresToDisplay)?_c('v-flex',{staticClass:\"last-scores-heading text-xs-center\",attrs:{\"d-flex\":\"\"}},[_c('h3',[_vm._v(_vm._s(_vm.lastScoresHeadingPartOne)+\" \"+_vm._s(_vm.lastScoresHeadingPartTwo))])]):_vm._e(),_vm._v(\" \"),_c('v-flex',[_c('v-layout',{attrs:{\"align-space-around\":\"\",\"column\":\"\"}},[_c('v-flex',{staticClass:\"hi-score-display\",attrs:{\"d-flex\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"justify-space-around\":\"\",\"py-2\":\"\"}},_vm._l((_vm.lastScoresToDisplay),function(value,index){return _c('v-flex',{key:index,attrs:{\"xs4\":\"\",\"sm1\":\"\",\"ma-0\":\"\"}},[_vm._v(\"\\n                \"+_vm._s(value)+\"\\n              \")])}))],1),_vm._v(\" \"),_vm._l((_vm.newStats),function(item){return (item.value)?_c('v-flex',{key:item.msg,staticClass:\"stats-display text-xs-center\"},[_vm._v(\"\\n            \"+_vm._s(item.msg)+\" \"+_vm._s(item.value)+\"\\n          \")]):_vm._e()})],2)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\",\"lg2\":\"\"}},[_c('v-btn',{staticClass:\"ui-button\",attrs:{\"ripple\":\"\",\"block\":\"\",\"large\":\"\",\"color\":\"orange\"},on:{\"click\":_vm.restartGame}},[_c('v-icon',{attrs:{\"medium\":\"\",\"color\":\"white\"}},[_vm._v(\"replay\")])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\",\"lg2\":\"\"}},[_c('v-btn',{staticClass:\"ui-button\",attrs:{\"ripple\":\"\",\"block\":\"\",\"large\":\"\",\"color\":\"purple darken-1\",\"to\":\"/help\"}},[_c('v-icon',{attrs:{\"medium\":\"\",\"color\":\"white\"}},[_vm._v(\"help_outline\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_Settings = (esExports);\n// CONCATENATED MODULE: ./src/components/Settings.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"0KBs\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42b174b2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  Settings,\n  components_Settings,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Settings = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/6.0fe2c4feff2cf81e68d9.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42b174b2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Settings.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Settings.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Settings.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42b174b2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Settings.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42b174b2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Settings.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-container fill-height id=\"gameSettings\">\r\n    <v-layout align-space-around column>\r\n<!-- Close button -->\r\n      <v-spacer></v-spacer>\r\n      <closeBtn></closeBtn>\r\n<!-- Title and user name -->\r\n      <v-flex class=\"text-xs-center\">\r\n        <v-layout column>\r\n        <h1 class=\"help-title\">{{ helpTitle }}</h1>\r\n        <h2 class=\"user-name\">{{ userName }}!</h2>\r\n        <h3 class=\"hi-score\" v-if=\"highestScore\">{{ hiscoreGreeting }} {{ highestScore }}{{ exclamation }}</h3>\r\n        </v-layout>\r\n      </v-flex>\r\n      <v-flex>\r\n        <chartist\r\n            ratio=\"ct-major-tenth\"\r\n            type=\"Bar\"\r\n            :data=\"chartData\"\r\n            :options=\"chartOptions\">\r\n        </chartist>\r\n      </v-flex>\r\n<!-- Last scores heading and table-->\r\n      <v-flex d-flex v-if=\"lastScoresToDisplay\" class=\"last-scores-heading text-xs-center\">\r\n        <!--h3>{{ lastScoresHeadingPartOne }} {{ this.lastScoresToDisplay.length }} {{ lastScoresHeadingPartTwo }}</h3-->\r\n        <h3>{{ lastScoresHeadingPartOne }} {{ lastScoresHeadingPartTwo }}</h3>\r\n      </v-flex>\r\n      <v-flex>\r\n        <v-layout align-space-around column>\r\n          <v-flex d-flex class=\"hi-score-display\">\r\n            <v-layout row wrap justify-space-around py-2>\r\n              <v-flex xs4 sm1 ma-0 v-for=\"(value, index) in lastScoresToDisplay\" :key=\"index\">\r\n                {{ value }}\r\n              </v-flex>\r\n            </v-layout>\r\n          </v-flex>\r\n<!-- Stats display -->\r\n          <!--v-flex class=\"stats-display text-xs-center\"\r\n            v-for=\"item in stats\"\r\n            v-if=\"item.value\"\r\n            :key=\"item.msg\">\r\n            {{ item.msg }}&nbsp;{{ item.value }}\r\n          </v-flex-->\r\n          <v-flex class=\"stats-display text-xs-center\"\r\n            v-for=\"item in newStats\"\r\n            v-if=\"item.value\"\r\n            :key=\"item.msg\">\r\n            {{ item.msg }}&nbsp;{{ item.value }}\r\n          </v-flex>\r\n        </v-layout>\r\n      </v-flex>\r\n      <v-layout row align-center justify-space-around>\r\n        <v-flex xs4 lg2 class=\"text-xs-center\">\r\n          <v-btn ripple block class=\"ui-button\" large color=\"orange\"\r\n            @click=\"restartGame\">\r\n            <v-icon medium color=\"white\">replay</v-icon>\r\n          </v-btn>\r\n        </v-flex>\r\n        <v-flex xs4 lg2 class=\"text-xs-center\">\r\n          <v-btn ripple block class=\"ui-button\" large color=\"purple darken-1\" to=\"/help\">\r\n            <v-icon medium color=\"white\">help_outline</v-icon>\r\n          </v-btn>\r\n        </v-flex>\r\n      </v-layout>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport store from '../store/store' // for reset state button\r\nimport { mapGetters } from 'vuex'\r\nimport closeBtn from '../components/CloseBtn'\r\nimport db from './firebaseInit'\r\n\r\nexport default {\r\n  name: 'Settings', // change to statss\r\n  data () {\r\n    return {\r\n      userName: '',\r\n      helpTitle: 'About',\r\n      helpButtonText: 'Help!',\r\n      highestScore: '',\r\n      hiscoreGreeting: 'Your highest score is',\r\n      exclamation: '.', // some over-engineering\r\n      lastScoresHeadingPartOne: 'Most recent',\r\n      lastScoresHeadingPartTwo: 'scores are',\r\n      userScoresArray: '',\r\n      lastScoresToDisplay: '',\r\n      userGamesPlayed: '',\r\n      chartData: {\r\n        labels: [],\r\n        series: []\r\n        // labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],\r\n        // series: [[333, 125, 256, 368, 129, 234, 623, 546, 345, 324, 34, 342]]\r\n      },\r\n      chartOptions: {\r\n        lineSmooth: false\r\n      },\r\n      newStats: {\r\n        gamesPlayed: {\r\n          msg: 'Games played',\r\n          value: ''\r\n        },\r\n        maxPossibleScore: {\r\n          msg: 'Max possible score is',\r\n          value: ''\r\n        },\r\n        percentFromMax: {\r\n          msg: 'Percent from max score ~',\r\n          value: ''\r\n        },\r\n        averageScore: {\r\n          msg: 'Your average score equals',\r\n          value: ''\r\n        }\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    closeBtn\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'getDefaultUserName',\r\n      'getUserData',\r\n      'getMaxPossibleScore'\r\n    ])\r\n  },\r\n  mounted () {\r\n    console.log(`Settings mounted`) // change to about\r\n    // check if user is authenticated\r\n    // let assembledArray\r\n    // this.lastScores = [512, 345, 534]\r\n    if (!this.getUserData.isAuthenticated) {\r\n      console.log(`You are anonymous!`)\r\n      this.userName = this.getDefaultUserName\r\n      this.highestScore = localStorage.getItem('highestScore')\r\n      this.userScoresArray = this.assembleLastScoresArray()\r\n    } else {\r\n      console.log(`You are existing user!`)\r\n      // this.setUserScoreDataFromDB(this.getUserData.uid)\r\n      this.highestScore = localStorage.getItem('highestScore')\r\n      this.userName = this.getUserData.name\r\n      /*\r\n      if (!this.userName || this.userName === '') {\r\n        this.userName = this.getDefaultUserName\r\n      }\r\n      */\r\n      let lastScoresString = localStorage.getItem('lastScoresArray')\r\n      // if one played at least one full game then there is an array\r\n      // with the last score, which is the highest and\r\n      // it is in the local storage after visiting the 'endGame' page\r\n      if (lastScoresString) {\r\n        this.userScoresArray = lastScoresString.split(',')\r\n      }\r\n    }\r\n    if (this.userScoresArray) {\r\n      this.lastScoresToDisplay = this.userScoresArray.slice(0).slice(-12)\r\n    }\r\n    this.newStats.gamesPlayed.value = this.userScoresArray.length\r\n    this.newStats.maxPossibleScore.value = this.getMaxPossibleScore\r\n    this.newStats.averageScore.value = this.computeAverageScore()\r\n    this.newStats.percentFromMax.value = this.computePercentFromMax()\r\n    if (this.userScoresArray.length) {\r\n      this.chartData.labels = this.prepareLabelsForChart(this.userScoresArray.length)\r\n      this.chartData.series = [this.lastScoresToDisplay]\r\n    }\r\n  },\r\n  methods: {\r\n    restartGame (state) {\r\n      console.log(`Restarting.`)\r\n      store.commit('resetState')\r\n      this.$router.push('/game')\r\n    },\r\n    prepareLabelsForChart (numOfLabels) {\r\n      // console.log(`Preparing labels ${typeof numOfLabels}`)\r\n      let resultsToDisplay = 12 // Twelve results for now\r\n      let lastLabelToDisplay = numOfLabels - resultsToDisplay\r\n      let labelsArray = []\r\n      if (numOfLabels >= resultsToDisplay) {\r\n        while (numOfLabels !== lastLabelToDisplay) {\r\n          labelsArray.push(numOfLabels)\r\n          numOfLabels--\r\n        }\r\n        return labelsArray.reverse()\r\n      } else {\r\n        while (numOfLabels !== 0) {\r\n          labelsArray.push(numOfLabels)\r\n          numOfLabels--\r\n          console.log('Scaaary..')\r\n        }\r\n        return labelsArray.reverse()\r\n      }\r\n    },\r\n    assembleLastScoresArray () {\r\n      console.log(`Preparing array`)\r\n      // this.lastScores = localStorage.getItem('lastScoresArray')\r\n      let lastScoresString = localStorage.getItem('lastScoresArray')\r\n      if (!lastScoresString) {\r\n        console.log(`You have to play at least one game to calculate stats`)\r\n        return false\r\n      } else {\r\n        return lastScoresString.split(',')\r\n      }\r\n    },\r\n    setUserScoreDataFromDB (uid) {\r\n      console.log(`Getting user scores for uid ${uid}`)\r\n      db.collection('users').where('uid', '==', uid)\r\n        .get()\r\n        .then(function (querySnapshot) {\r\n          let scoreArray\r\n\r\n          querySnapshot.forEach(function (doc) {\r\n            // doc.data() is never undefined for query doc snapshots\r\n            if (doc.data().uid === uid) {\r\n              scoreArray = doc.data().resultsArray\r\n            }\r\n          })\r\n          return scoreArray\r\n        })\r\n        .then((scoreArray) => {\r\n          localStorage.setItem('lastScoresArray', scoreArray)\r\n          console.log(`Setting users score array to local storage ${scoreArray}`)\r\n        })\r\n        .catch(function (error) {\r\n          console.log('Error getting documents: ', error)\r\n        })\r\n    },\r\n    computeAverageScore () {\r\n      // let lastScores = [333, 125, 256, 368, -12, 234, 623, 546, 345, 324, 34, 342]\r\n      if (this.userScoresArray) {\r\n        let arrayToReduce = []\r\n        const scoreSum = (accumulator, currentValue) => accumulator + currentValue\r\n        for (let value of this.userScoresArray) {\r\n          arrayToReduce.push(parseInt(value))\r\n        }\r\n        console.log(`User scores array: ${this.userScoresArray}`)\r\n        if (arrayToReduce.length > 0) {\r\n          return parseInt(arrayToReduce.reduce(scoreSum) / arrayToReduce.length)\r\n        } else {\r\n          return 0\r\n        }\r\n      }\r\n    },\r\n    computePercentFromMax () {\r\n      let result = Math.floor(this.newStats.averageScore.value / this.getMaxPossibleScore * 100)\r\n      if (result) {\r\n        return result + '%'\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/scss/index.scss';\r\n\r\n.help-title,\r\n.user-name,\r\n.hi-score,\r\n.last-scores-heading,\r\n.hi-score-display,\r\n.stats-display {\r\n  font-family: $text-font;\r\n}\r\n\r\n.help-title {\r\n  font-size: 2.3em;\r\n}\r\n.user-name {\r\n  color: $color-orange;\r\n  font-size: 1.5em;\r\n}\r\n.hi-score {\r\n  line-height: 1.2;\r\n}\r\n.hi-score-display {\r\n  color: $color-primary-1;\r\n  font-size: 1.9em;\r\n  text-align: center;\r\n}\r\n.stats-display {\r\n  color: $color-primary-3;\r\n  font-size: 1.1em;\r\n  font-weight: 700;\r\n  line-height: 1.3;\r\n}\r\n\r\n@media screen and (orientation: landscape) {\r\n  .hi-score-display {\r\n    font-size: 1.3em;\r\n    font-weight: 700;\r\n  }\r\n}\r\n\r\n@media screen and (max-resolution: 96dpi) and (min-width: 500px) { // desktop\r\n  .help-title {\r\n    font-size: 4em;\r\n  }\r\n  .user-name {\r\n    font-size: 3em;\r\n  }\r\n  .hi-score-display {\r\n    font-size: 2em;\r\n  }\r\n  .stats-display {\r\n    font-size: 1.5em;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Settings.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"id\":\"gameSettings\"}},[_c('v-layout',{attrs:{\"align-space-around\":\"\",\"column\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeBtn'),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\"},[_c('v-layout',{attrs:{\"column\":\"\"}},[_c('h1',{staticClass:\"help-title\"},[_vm._v(_vm._s(_vm.helpTitle))]),_vm._v(\" \"),_c('h2',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.userName)+\"!\")]),_vm._v(\" \"),(_vm.highestScore)?_c('h3',{staticClass:\"hi-score\"},[_vm._v(_vm._s(_vm.hiscoreGreeting)+\" \"+_vm._s(_vm.highestScore)+_vm._s(_vm.exclamation))]):_vm._e()])],1),_vm._v(\" \"),_c('v-flex',[_c('chartist',{attrs:{\"ratio\":\"ct-major-tenth\",\"type\":\"Bar\",\"data\":_vm.chartData,\"options\":_vm.chartOptions}})],1),_vm._v(\" \"),(_vm.lastScoresToDisplay)?_c('v-flex',{staticClass:\"last-scores-heading text-xs-center\",attrs:{\"d-flex\":\"\"}},[_c('h3',[_vm._v(_vm._s(_vm.lastScoresHeadingPartOne)+\" \"+_vm._s(_vm.lastScoresHeadingPartTwo))])]):_vm._e(),_vm._v(\" \"),_c('v-flex',[_c('v-layout',{attrs:{\"align-space-around\":\"\",\"column\":\"\"}},[_c('v-flex',{staticClass:\"hi-score-display\",attrs:{\"d-flex\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\",\"justify-space-around\":\"\",\"py-2\":\"\"}},_vm._l((_vm.lastScoresToDisplay),function(value,index){return _c('v-flex',{key:index,attrs:{\"xs4\":\"\",\"sm1\":\"\",\"ma-0\":\"\"}},[_vm._v(\"\\n                \"+_vm._s(value)+\"\\n              \")])}))],1),_vm._v(\" \"),_vm._l((_vm.newStats),function(item){return (item.value)?_c('v-flex',{key:item.msg,staticClass:\"stats-display text-xs-center\"},[_vm._v(\"\\n            \"+_vm._s(item.msg)+\" \"+_vm._s(item.value)+\"\\n          \")]):_vm._e()})],2)],1),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\",\"lg2\":\"\"}},[_c('v-btn',{staticClass:\"ui-button\",attrs:{\"ripple\":\"\",\"block\":\"\",\"large\":\"\",\"color\":\"orange\"},on:{\"click\":_vm.restartGame}},[_c('v-icon',{attrs:{\"medium\":\"\",\"color\":\"white\"}},[_vm._v(\"replay\")])],1)],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"xs4\":\"\",\"lg2\":\"\"}},[_c('v-btn',{staticClass:\"ui-button\",attrs:{\"ripple\":\"\",\"block\":\"\",\"large\":\"\",\"color\":\"purple darken-1\",\"to\":\"/help\"}},[_c('v-icon',{attrs:{\"medium\":\"\",\"color\":\"white\"}},[_vm._v(\"help_outline\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42b174b2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Settings.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}