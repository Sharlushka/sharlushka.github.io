webpackJsonp([7],{dIqY:function(e,t,s){"use strict";function r(e){s("knqU")}Object.defineProperty(t,"__esModule",{value:!0});var a=s("qVsQ"),o=s("7G8Q"),l=s("yviF"),n=s.n(l),i=(s("dih4"),s("stGB")),c={name:"register",data:function(){return{registering:!1,users:[],errorMessage:"",pageTitle:"Register",valid:!0,name:"",nameRules:[function(e){return!e||e.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length<=12||"Password must be less than 12 characters"}],confirmPassword:"",select:null,items:["Item 1","Item 2","Item 3","Item 4"],checkbox:!1}},components:{closeButton:i.a},computed:{comparePasswords:function(){return this.password===this.confirmPassword||"Passwords do not match"}},methods:{signUp:function(){var e=this;this.errorMessage="",this.email&&this.password&&(this.registering=!0,n.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(t){var s={isAuthenticated:!0,uid:t.user.uid};e.$store.commit("setUser",s),""===e.name&&(e.name="Anonymous");var r=localStorage.getItem("highestScore"),a=void 0,o=void 0;r?(a=localStorage.getItem("lastScoresArray"),o=localStorage.getItem("schoolScores")):(r="",a="",o="");var l={name:e.name,uid:t.user.uid,email:t.user.email,hiScore:r,resultsArray:a,schoolResultsArray:o};e.addNewUser(l),e.$store.state.user.name=e.name,console.log("User added "+t.user.email),e.verifyUserEmail(),e.$router.push("/")}).catch(function(t){console.log(t.message),e.errorMessage=t.message}))},addNewUser:function(e){console.log("Adding user"),a.a.collection("users").doc().set(e),console.log("Document successfully written!")},verifyUserEmail:function(){n.a.auth().currentUser.sendEmailVerification().then(function(){console.log("Email sent")}).catch(function(e){console.log("Error! "+e)})},clear:function(){this.$refs.form.reset()}},created:function(){n.a.apps.length||n.a.initializeApp(o.a),console.log("Register page created")}},u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:"",id:"register"}},[s("v-layout",{attrs:{column:""}},[s("closeButton"),e._v(" "),s("v-alert",{attrs:{value:e.errorMessage,dismissible:"",outline:"",type:"error"}},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]),e._v(" "),s("v-flex",{staticClass:"register-title text-xs-center py-4"},[s("h1",[e._v(e._s(e.pageTitle))])]),e._v(" "),s("v-layout",{staticClass:"register-form pb-4",attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs9:""}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-text-field",{attrs:{rules:e.nameRules,counter:10,label:"Name",autocomplete:"username",color:"purple accent-4"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),s("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",autocomplete:"email",color:"purple accent-4",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("v-text-field",{attrs:{type:"password",rules:e.passwordRules,label:"Password",autocomplete:"current-password",color:"purple accent-4",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("v-text-field",{attrs:{rules:[e.comparePasswords],type:"password",label:"Confirm password",autocomplete:"off",color:"purple accent-4",required:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1)],1)],1),e._v(" "),s("v-layout",{staticClass:"buttons text-xs-center",attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs5:"","d-flex":""}},[s("v-btn",{staticClass:"white--text",attrs:{disabled:!e.valid,loading:e.registering,large:"",color:"orange"},on:{click:function(t){return t.preventDefault(),e.signUp(t)}}},[e._v("\n          register\n        ")])],1),e._v(" "),s("v-flex",{attrs:{xs5:"","d-flex":""}},[s("v-btn",{staticClass:"button white--text",attrs:{disabled:e.valid,large:"",color:"purple darken-1"},on:{click:e.clear}},[e._v("\n          clear\n        ")])],1)],1)],1)],1)},d=[],m={render:u,staticRenderFns:d},f=m,p=s("VU/8"),v=r,g=p(c,f,!1,v,"data-v-348bf208",null);t.default=g.exports},knqU:function(e,t){}});
//# sourceMappingURL=7.83b35f7f43785e73247b.js.map