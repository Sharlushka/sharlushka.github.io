webpackJsonp([2],{LzgP:function(t,e){},tZZY:function(t,e,a){"use strict";function r(t){a("LzgP")}function s(t){a("w/yI")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),o={name:"NetworkCheck",data:function(){return{offlineMessage:!1}},computed:{networkStatus:function(){return this.isOnline?"ok":null}}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.networkStatus?t._e():a("v-dialog",{attrs:{width:"20em"},model:{value:t.offlineMessage,callback:function(e){t.offlineMessage=e},expression:"offlineMessage"}},[a("v-btn",{attrs:{slot:"activator",small:"",icon:"",fab:"",dark:""},slot:"activator"},[a("v-icon",{staticClass:"blink",attrs:{size:"2em",color:"orange"}},[t._v("\n          cloud_off\n        ")])],1),t._v(" "),a("v-card",[a("v-card-text",{staticClass:"text-xs-center offline-message-text"},[t._v("\n          Check your connection to save results.\n        ")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(e){t.offlineMessage=!1}}},[a("v-icon",{attrs:{size:"2em",color:"orange"}},[t._v("done")])],1)],1)],1)],1)},c=[],u={render:l,staticRenderFns:c},d=u,v=a("VU/8"),m=v(o,d,!1,null,null,null),h=m.exports,f=a("NYxO"),g=a("wtEF"),C=a("BO1k"),p=a.n(C),y={name:"DiceBox",props:["turnCompleted"],data:function(){return{navigatorSupported:!1,hidden:!1,zzz:"zzz",mainButtonState:{play:!0,roll:!1,save:!1,disabled:!1}}},mounted:function(){this.$nextTick(function(){console.log("Dice box component mounted"),"vibrate"in navigator&&(this.navigatorSupported=!0)})},watch:{turnCompleted:{immediate:!0,handler:function(){this.getCurrentGameState.gameEnded||(this.updateMainButtonState(),this.hidden=!this.hidden)}}},computed:i()({},Object(f.c)(["getDiceArray","getCurrentGameState"])),methods:{vibrate:function(){console.log("zzz"),this.zzz+="-zzz";var t=[5,75,66,300,33,150,15];navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate(t)},vibrateOnce:function(){console.log("One z");var t=[10];navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate(t)},updateMainButtonState:function(){var t=document.querySelector(".main-button");if(!t)return!1;this.mainButtonState.play=!0,this.mainButtonState.save=!1,this.mainButtonState.roll=!1,3!==this.getCurrentGameState.rollsCountForButton||this.getCurrentGameState.turnCompleted||(this.mainButtonState.play=!0),this.getCurrentGameState.rollsCountForButton<=2&&!this.getCurrentGameState.turnCompleted&&(this.mainButtonState.play=!1,this.mainButtonState.roll=!0),this.getCurrentGameState.turnCompleted&&(this.mainButtonState.roll=!1,this.mainButtonState.play=!0,this.mainButtonState.disabled=!1),0!==this.getCurrentGameState.rollsCountForButton||this.getCurrentGameState.turnCompleted||(this.mainButtonState.roll=!1,this.mainButtonState.play=!1,this.mainButtonState.save=!0,this.mainButtonState.disabled=!0,t.classList.add("bounce"))},handleMainGameButtonClick:function(){if(this.getCurrentGameState.rollsCountForButton>0&&!this.getCurrentGameState.turnCompleted){if(g.a.commit("rollDice"),this.getCurrentGameState.diceRollInProgress){var t=document.querySelectorAll(".dice-icon:not(.chosen)"),e=!0,a=!1,r=void 0;try{for(var s,n=p()(t);!(e=(s=n.next()).done);e=!0){s.value.classList.add("zoomIn")}}catch(t){a=!0,r=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw r}}}0===this.getCurrentGameState.currentRollCount&&this.getCurrentGameState.currentGameTurn<=6&&!this.getCurrentGameState.gameCheck&&this.$router.push({path:"/endgame"}),setTimeout(function(){var t=document.querySelectorAll(".dice-icon"),e=!0,a=!1,r=void 0;try{for(var s,n=p()(t);!(e=(s=n.next()).done);e=!0){s.value.classList.remove("zoomIn")}}catch(t){a=!0,r=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw r}}},500)}this.updateMainButtonState()},selectDice:function(t){var e=t.currentTarget,a=document.querySelector(".dice-box");e.classList.contains("chosen")?a.appendChild(e):a.insertBefore(e,a.childNodes[0]),g.a.commit("setDiceChosenState",e.id),g.a.commit("computeScore")}}},_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{"d-flex":"","ma-0":"","pa-0":"",id:"diceControls"}},[a("v-layout",{staticClass:"dice-box-layout",attrs:{row:"","align-center":""}},[a("v-flex",{staticClass:"game-dice-container dice-box",class:{visible:this.getCurrentGameState.gameEnded},attrs:{"d-flex":"",xs9:""}},t._l(this.getDiceArray,function(e){return a("svg",{key:e.id,staticClass:"dice-icon default animated",class:{chosen:e.chosen},attrs:{id:e.id,fill:"none"},on:{click:t.selectDice}},[a("use",t._b({staticClass:"game-dice animated fadeIn"},"use",{"xlink:href":"#"+e.currentIcon},!1))])})),t._v(" "),a("v-flex",{staticClass:"main-button animated",class:{save:this.mainButtonState.save,bounce:this.mainButtonState.save,fadeOut:this.getCurrentGameState.gameEnded,visible:this.getCurrentGameState.gameEnded},attrs:{"aria-label":"Main game button",type:"button"},on:{click:function(e){return e.preventDefault(),t.handleMainGameButtonClick(e)}}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[this.mainButtonState.play?a("v-flex",{staticClass:"play-arrow animated fadeIn",attrs:{xs2:""}}):t._e(),t._v(" "),this.mainButtonState.roll&&this.getCurrentGameState.rollsCountForButton<=3?a("v-flex",{staticClass:"circle-container animated fadeIn"},[a("v-layout",{attrs:{row:"","justify-center":""}},t._l(this.getCurrentGameState.rollsCountForButton,function(t,e){return a("div",{key:e,staticClass:"roll-circle animated fadeIn"})}))],1):t._e(),t._v(" "),this.mainButtonState.save?a("v-flex",{staticClass:"stop-brick animated fadeIn",attrs:{xs4:""}}):t._e()],1)],1)],1)],1)},x=[],b={render:_,staticRenderFns:x},S=b,k=a("VU/8"),w=r,B=k(y,S,!1,w,"data-v-02e8d5be",null),A=B.exports,V={name:"Game",data:function(){return{title:"Sharlushka",highestScore:0,turnCompleted:!1,progressBarLength:3,navDrawer:!1,navDrawerLinks:[{path:"/help",icon:"trending_up",text:"School results & help"},{path:"/settings",icon:"equalizer",text:"User stats"},{path:"/leaderboard",icon:"import_export",text:"Leaderboard"},{path:"/login",icon:"exit_to_app",text:"Log in/out"}]}},components:{DiceBox:A,NetworkCheck:h},computed:i()({},Object(f.c)(["debugInfo","chosenDiceArray","currentValuesInScoreArray","getSchoolArray","getCombinationArray","getDiceArray","getCurrentGameState","getTotalScore","getUserName"]),{gameName:function(){return"Sharlushka"},turnState:function(){return g.a.state.newTurn},progressBarState:function(){return g.a.state.rollCount},currentUserName:function(){return""===this.getUserName?"Anonymous":this.getUserName}}),watch:{turnState:{immediate:!0,handler:function(){this.turnCompleted=!this.turnState}},progressBarState:{immediate:!0,handler:function(){if(!document.querySelector(".progress-bar"))return!1;this.updateProgressBar()}}},mounted:function(){var t=localStorage.getItem("highestScore");t&&(this.highestScore=t)},methods:i()({},Object(f.b)(["nextTurn","computeScore"]),{manipulateDrawer:function(){this.navDrawer=!this.navDrawer},updateOnlineStatus:function(){navigator.onLine?console.log("online"):console.log("offline")},updateProgressBar:function(){var t=document.querySelector(".progress-bar");2===g.a.state.rollCount?t.style.width="33%":1===g.a.state.rollCount?t.style.width="66%":0===g.a.state.rollCount?(t.style.width="100%",t.classList.add("full")):3===g.a.state.rollCount&&(t.style.width="0%",t.classList.remove("full"))},handleBoardClick:function(t){for(var e=!1,a=null,r=t.target;!e&&r;)r.classList.contains("school-dice-icon")||r.classList.contains("dice-icon")||r.classList.contains("game-combination")?(a=r.id,e=!0):r.getAttribute("resultId")?(a=r.getAttribute("resultId"),e=!0):r=r.parentElement;a?this.recordResult(a):console.log("Nothing to record Id is: "+a)},clearResultBox:function(){for(var t in g.a.state.scoreArray)g.a.state.scoreArray[t].final||(g.a.state.scoreArray[t].value="");for(var e in g.a.state.diceArray)g.a.state.diceArray[e].chosen&&(g.a.state.diceArray[e].chosen=!1)},debugMode:function(){g.a.state.debug=!0},recordResult:function(t){var e=this;console.log("Recording result.."),g.a.state.gameInProgress=!0;var a=t,r=g.a.state.scoreArray.map(function(t){return t.id}).indexOf(a);if(g.a.state.schoolCompleted||""===g.a.state.scoreArray[r].value||g.a.state.turnCompleted||g.a.state.scoreArray[r].final)if(""!==g.a.state.scoreArray[r].value&&g.a.state.scoreArray[r].displayValues&&g.a.state.scoreArray[r].displayValues.length<3&&!g.a.state.turnCompleted)g.a.state.turnCompleted=!0,g.a.state.scoreArray[r].displayValues.push(g.a.state.scoreArray[r].value),g.a.state.gameTotal+=g.a.state.scoreArray[r].value,3===g.a.state.scoreArray[r].displayValues.length&&(g.a.state.scoreArray[r].final=!0,g.a.state.scoreArray[r].value=""),this.clearResultBox();else{if(g.a.state.turnCompleted||""!==g.a.state.scoreArray[r].value||g.a.state.scoreArray[r].final||!g.a.state.schoolCompleted||0!==g.a.state.rollCount||g.a.state.zeroCheck)return!1;g.a.state.scoreArray[r].displayValues.length<3&&(g.a.state.scoreArray[r].displayValues.push(0),g.a.state.zeroCheck=!0,this.clearResultBox(),g.a.state.turnCompleted=!0),3===g.a.state.scoreArray[r].displayValues.length&&(g.a.state.scoreArray[r].final=!0),g.a.state.turnCompleted=!0}else g.a.state.scoreArray[r].final=!0,g.a.state.schoolScoreTotal+=g.a.state.scoreArray[r].value,g.a.state.turnCompleted=!0,6===g.a.state.currentGameTurn&&(g.a.state.schoolCompleted=!0),this.clearResultBox();33===g.a.state.currentGameTurn&&g.a.state.turnCompleted?(console.log("Game Over!"),g.a.state.gameEnded=!0,setTimeout(function(){console.log("Timer!"),e.$router.push("/endgame")},1500)):(this.turnCompleted=!0,g.a.commit("nextTurn"),this.updateProgressBar()),this.turnCompleted=!0,console.log("Turn completed")}})},G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:"","ma-0":"","pa-0":"",id:"gameView"}},[["Game"].includes(t.$route.name)?a("v-toolbar",{staticClass:"text-xs-center",attrs:{app:"",dense:"",color:"purple darken-2"}},[a("span",{staticClass:"score pl-3"},[t._v("\n        "+t._s(t.getTotalScore)+"\n      ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-toolbar-title",{staticClass:"game-name"},[a("router-link",{attrs:{to:{path:"/"}}},[t._v("\n        "+t._s(t.gameName)+"\n        ")])],1),t._v(" "),a("v-spacer"),t._v(" "),a("NetworkCheck"),t._v(" "),a("v-toolbar-items",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{fab:"",dark:"",small:"",flat:""},on:{click:t.manipulateDrawer}},[a("v-icon",{attrs:{large:""}},[t._v("more_vert")])],1)],1)],1):t._e(),t._v(" "),a("v-navigation-drawer",{staticClass:"navigation-drawer",attrs:{temporary:"",width:"295",fixed:"",right:""},model:{value:t.navDrawer,callback:function(e){t.navDrawer=e},expression:"navDrawer"}},[a("v-list",[a("v-list-tile",{staticClass:"pb-3",on:{click:t.manipulateDrawer}},[a("v-list-tile-action",[a("v-flex",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{large:"",color:"orange"}},[t._v("keyboard_backspace")])],1)],1),t._v(" "),a("v-list-tile-title",{staticClass:"drawer-menu-item"},[t._v("Back")])],1),t._v(" "),a("v-list-tile",[a("v-list-tile-action",[a("v-flex",{staticClass:"text-xs-center"},[a("NetworkCheck")],1)],1),t._v(" "),a("v-list-tile-content",{staticClass:"drawer-menu-item pa-0 user-name"},[t._v("Hi, "+t._s(t.currentUserName)+".")])],1),t._v(" "),t._l(t.navDrawerLinks,function(e){return a("v-list-tile",{key:e.path,attrs:{to:{path:e.path}}},[a("v-list-tile-action",[a("v-flex",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{color:"purple darken-2"}},[t._v("\n                "+t._s(e.icon)+"\n              ")])],1)],1),t._v(" "),a("v-list-tile-title",{staticClass:"drawer-menu-item subheading"},[t._v("\n            "+t._s(e.text)+"\n          ")])],1)})],2)],1),t._v(" "),a("svg",{staticStyle:{display:"none"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[a("symbol",{attrs:{id:"diceOnes",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"100",cy:"100",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})]),t._v(" "),a("symbol",{attrs:{id:"diceTwos",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"50",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})]),t._v(" "),a("symbol",{staticClass:"dice",attrs:{id:"diceThrees",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"100",cy:"100",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"50",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})]),t._v(" "),a("symbol",{staticClass:"dice",attrs:{id:"diceFours",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"50",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"50",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})]),t._v(" "),a("symbol",{staticClass:"dice",attrs:{id:"diceFives",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"100",cy:"100",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"50",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"50",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})]),t._v(" "),a("symbol",{staticClass:"dice",attrs:{id:"diceSixes",viewBox:"0 0 200 200"}},[a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"100",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"50",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"150",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"150",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"100",r:"18"}}),t._v(" "),a("circle",{attrs:{fill:"currentColor",cx:"50",cy:"50",r:"18"}}),t._v(" "),a("path",{attrs:{"stroke-width":".4em",d:"M20,5H180a15,15,0,0,1,15,15V180a15,15,0,0,1-15,15H20A15,15,0,0,1,5,180V20A15,15,0,0,1,20,5Z"}})])]),t._v(" "),a("v-layout",{staticClass:"game-layout",class:{"game-ended":this.getCurrentGameState.gameEnded},attrs:{column:""}},[a("v-layout",{attrs:{row:""}},[a("v-flex",{staticClass:"school-dice-container",attrs:{"d-flex":"","align-center":""}},t._l(this.getSchoolArray,function(e){return a("svg",{key:e.id,staticClass:"school-dice-icon default",class:{chosen:e.final},attrs:{id:e.id,fill:"none"},on:{click:t.handleBoardClick}},[a("use",t._b({},"use",{"xlink:href":"#"+e.icon},!1))])}))],1),t._v(" "),a("v-layout",{staticClass:"school-results-layout",attrs:{row:""}},t._l(this.getSchoolArray,function(e){return a("v-flex",{key:e.id,staticClass:"school-result",class:{saved:e.final,blink:!e.final},attrs:{"d-flex":"",xs2:"","align-center":"","justify-center":""},on:{click:t.handleBoardClick}},[a("span",{attrs:{resultId:e.id}},[t._v(t._s(e.value))])])})),t._v(" "),a("v-layout",{staticClass:"game-combinations-layout",attrs:{column:"","justify-center":""}},t._l(this.getCombinationArray,function(e){return a("v-flex",{key:e.id,staticClass:"game-combination",class:{set:e.final},attrs:{"d-flex":"","align-center":"",id:e.id},on:{click:t.handleBoardClick}},[a("v-layout",[a("v-flex",{attrs:{xs6:"","pl-2":""}},[t._v(t._s(e.fullName))]),t._v(" "),t._l(e.displayValues,function(e,r){return a("v-flex",{key:r,staticClass:"text-xs-center",attrs:{xs2:""}},[t._v("\n              "+t._s(e)+"\n            ")])}),t._v(" "),e.value?a("v-flex",{staticClass:"blink text-xs-center",attrs:{xs2:""}},[t._v("\n              "+t._s(e.value)+"\n            ")]):t._e()],2)],1)})),t._v(" "),a("DiceBox",{attrs:{turnCompleted:t.turnCompleted}})],1),t._v(" "),a("div",{staticClass:"progress-bar"})],1)},z=[],D={render:G,staticRenderFns:z},I=D,M=a("VU/8"),T=s,L=M(V,I,!1,T,"data-v-22019e6a",null);e.default=L.exports},"w/yI":function(t,e){}});
//# sourceMappingURL=2.52e461b5cf7df6022f20.js.map