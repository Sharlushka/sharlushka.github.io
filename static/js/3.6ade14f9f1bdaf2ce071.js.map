{"version":3,"sources":["webpack:///static/js/3.6ade14f9f1bdaf2ce071.js","webpack:///./src/components/Register.vue","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue?a068"],"names":["webpackJsonp","YJRQ","module","exports","dIqY","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","firebaseInit","firebaseConfig","index_cjs","index_cjs_default","n","CloseBtn","Register","name","data","users","errorMessage","pageTitle","valid","nameRules","v","length","email","emailRules","test","password","passwordRules","confirmPassword","select","items","checkbox","components","closeButton","computed","comparePasswords","this","methods","signUp","_this","a","auth","createUserWithEmailAndPassword","then","response","newUser","isAuthenticated","uid","user","$store","commit","hiScoreToSet","localStorage","getItem","scoresArrayToSet","schoolResultsToSet","newUserData","hiScore","resultsArray","schoolResultsArray","addNewUser","state","console","log","verifyUserEmail","$router","push","catch","err","message","userData","collection","doc","set","currentUser","sendEmailVerification","error","clear","$refs","form","reset","created","apps","initializeApp","render","_vm","_h","$createElement","_c","_self","attrs","column","id","pa-2","pt-3","_v","dismissible","outline","type","_s","staticClass","justify-center","xs8","ref","lazy-validation","model","callback","$$v","expression","rules","counter","label","autocomplete","required","xs5","d-flex","disabled","large","color","on","click","$event","preventDefault","staticRenderFns","esExports","components_Register","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"static/js/3.6ade14f9f1bdaf2ce071.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"YJRQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"dIqY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/components/firebaseInit.js\nvar firebaseInit = __webpack_require__(\"qVsQ\");\n\n// EXTERNAL MODULE: ./src/components/firebaseConfig.js\nvar firebaseConfig = __webpack_require__(\"7G8Q\");\n\n// EXTERNAL MODULE: ./node_modules/firebase/app/dist/index.cjs.js\nvar index_cjs = __webpack_require__(\"yviF\");\nvar index_cjs_default = /*#__PURE__*/__webpack_require__.n(index_cjs);\n\n// EXTERNAL MODULE: ./node_modules/firebase/auth/dist/index.esm.js\nvar index_esm = __webpack_require__(\"dih4\");\n\n// EXTERNAL MODULE: ./src/components/CloseBtn.vue + 2 modules\nvar CloseBtn = __webpack_require__(\"stGB\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Register.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ var Register = ({\n  name: 'register',\n  data: function data() {\n    return {\n      users: [],\n      errorMessage: '',\n      pageTitle: 'Register',\n      valid: true,\n      name: '',\n      nameRules: [function (v) {\n        return !v || v.length <= 10 || 'Name must be less than 10 characters';\n      }],\n      email: '',\n      emailRules: [function (v) {\n        return !!v || 'E-mail is required';\n      }, function (v) {\n        return (/.+@.+/.test(v) || 'E-mail must be valid'\n        );\n      }],\n      password: '',\n      passwordRules: [function (v) {\n        return !!v || 'Password is required';\n      }, function (v) {\n        return v && v.length <= 12 || 'Password must be less than 12 characters';\n      }],\n      confirmPassword: '',\n      select: null,\n      items: ['Item 1', 'Item 2', 'Item 3', 'Item 4'],\n      checkbox: false\n    };\n  },\n  components: {\n    closeButton: CloseBtn[\"a\" /* default */]\n  },\n  computed: {\n    comparePasswords: function comparePasswords() {\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true;\n    }\n  },\n  methods: {\n    signUp: function signUp() {\n      var _this = this;\n\n      this.errorMessage = ''; // clear error message?\n      if (this.email && this.password) {\n        index_cjs_default.a.auth().createUserWithEmailAndPassword(this.email, this.password).then(function (response) {\n          // set current user in store\n          var newUser = {\n            isAuthenticated: true,\n            uid: response.user.uid\n          };\n          _this.$store.commit('setUser', newUser);\n          // add new user data to db\n          if (_this.name === '') {\n            // it is optional, privacy meh\n            _this.name = 'Anonymous'; // get default name??\n          }\n\n          var hiScoreToSet = localStorage.getItem('highestScore');\n          var scoresArrayToSet = void 0;\n          var schoolResultsToSet = void 0;\n          if (hiScoreToSet) {\n            scoresArrayToSet = localStorage.getItem('lastScoresArray');\n            schoolResultsToSet = localStorage.getItem('schoolScores'); // !do something about naming here\n          } else {\n            hiScoreToSet = '';\n            scoresArrayToSet = '';\n            schoolResultsToSet = '';\n          }\n\n          var newUserData = {\n            name: _this.name, // or maybe Anonymous\n            uid: response.user.uid,\n            email: response.user.email,\n            // resultsArray: [123, 432, 554], // or not\n            // hiScore: 478 // if he played more than one game\n            hiScore: hiScoreToSet,\n            resultsArray: scoresArrayToSet,\n            schoolResultsArray: schoolResultsToSet\n          };\n          _this.addNewUser(newUserData);\n          // localStorage.setItem('userName', this.name)\n          _this.$store.state.user.name = _this.name;\n          // this.addNewUser(response.user.email, response.user.uid, this.name)\n          console.log('User added ' + response.user.email);\n          _this.verifyUserEmail();\n          _this.$router.push('/');\n          /*\r\n          firebase\r\n            .auth()\r\n            .signInWithEmailAndPassword(this.email, this.password)\r\n            .then(\r\n              response => {\r\n                console.log(`Login in after registration`)\r\n                console.log(response.user.email)\r\n                this.$router.push('/')\r\n              },\r\n              err => {\r\n                console.dir(err)\r\n                this.errorMessage = err.message\r\n              })\r\n            */\n        }).catch(function (err) {\n          console.log(err.message);\n          _this.errorMessage = err.message;\n        });\n      }\n    },\n    addNewUser: function addNewUser(userData) {\n      console.log('Adding user');\n      // Add a new document with a generated id.\n      var newUserRef = firebaseInit[\"a\" /* default */].collection('users').doc();\n      /*\r\n      let newUserData = {\r\n        name: 'Anonymous',\r\n        userEmail: 'hank@aol.com',\r\n        userUid: 'fgdfgDFGDFGvsdf3',\r\n        // dateExample: new Date('December 10, 1815'),\r\n        userResults: [234, 432, 543]\r\n      }\r\n      */\n      // later...\n      // console.dir(this.$store.state.user.uid)\n      // userData.ownerId = newUserRef.id\n      newUserRef.set(userData);\n      console.log('Document successfully written!');\n    },\n    // end of user adding\n    verifyUserEmail: function verifyUserEmail() {\n      var user = index_cjs_default.a.auth().currentUser;\n      user.sendEmailVerification().then(function () {\n        console.log('Email sent');\n      }).catch(function (error) {\n        console.log('Error! ' + error);\n      });\n    },\n    clear: function clear() {\n      this.$refs.form.reset();\n    }\n  },\n  created: function created() {\n    if (!index_cjs_default.a.apps.length) {\n      index_cjs_default.a.initializeApp(firebaseConfig[\"a\" /* default */]);\n    }\n    console.log('Register page created');\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8c384d36\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Register.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"column\":\"\",\"id\":\"register\",\"pa-2\":\"\",\"pt-3\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeButton'),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.errorMessage)+\"\\n  \")]),_vm._v(\" \"),_c('v-flex',{staticClass:\"register-title text-xs-center\"},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"register-form\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs8\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.nameRules,\"counter\":10,\"label\":\"Name\",\"autocomplete\":\"username\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"autocomplete\":\"email\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"type\":'password',\"rules\":_vm.passwordRules,\"label\":\"Password\",\"autocomplete\":\"current-password\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":[_vm.comparePasswords],\"type\":'password',\"label\":\"Confirm password\",\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.confirmPassword),callback:function ($$v) {_vm.confirmPassword=$$v},expression:\"confirmPassword\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"buttons text-xs-center\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\"}},[_c('v-btn',{staticClass:\"white--text\",attrs:{\"disabled\":!_vm.valid,\"large\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.signUp($event)}}},[_vm._v(\"\\n        register\\n      \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n        clear\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var components_Register = (esExports);\n// CONCATENATED MODULE: ./src/components/Register.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"YJRQ\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8c384d36\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  Register,\n  components_Register,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_Register = __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.6ade14f9f1bdaf2ce071.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8c384d36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Register.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8c384d36\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Register.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8c384d36\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Register.vue\n// module id = null\n// module chunks = ","<template>\r\n  <v-layout column id=\"register\" pa-2 pt-3>\r\n    <v-spacer></v-spacer>\r\n    <closeButton></closeButton>\r\n    <v-alert\r\n      :value=\"errorMessage\"\r\n      dismissible\r\n      outline\r\n      type=\"error\">\r\n      {{ errorMessage }}\r\n    </v-alert>\r\n    <v-flex class=\"register-title text-xs-center\">\r\n      <h1>{{ pageTitle }}</h1>\r\n    </v-flex>\r\n    <!--v-flex d-flex align-center class=\"text-xs-center\">\r\n      <h2>Form is {{ valid }}</h2>\r\n    </v-flex-->\r\n    <!--v-flex d-flex class=\"text-xs-center\"\r\n        v-for=\"user in users\"\r\n        :key=\"user.id\">\r\n        <span>{{ user.name }}</span>\r\n      </v-flex-->\r\n      <!--v-flex d-flex class=\"text-xs-center\">\r\n        <span>{{ name }}</span>\r\n      </v-flex-->\r\n    <v-layout justify-center class=\"register-form\">\r\n      <v-flex xs8>\r\n      <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n      <v-text-field\r\n        v-model=\"name\"\r\n        :rules=\"nameRules\"\r\n        :counter=\"10\"\r\n        label=\"Name\"\r\n        autocomplete=\"username\">\r\n      </v-text-field>\r\n      <v-text-field\r\n        v-model=\"email\"\r\n        :rules=\"emailRules\"\r\n        label=\"E-mail\"\r\n        autocomplete=\"email\"\r\n        required>\r\n      </v-text-field>\r\n      <v-text-field\r\n        v-model=\"password\"\r\n        :type=\"'password'\"\r\n        :rules=\"passwordRules\"\r\n        label=\"Password\"\r\n        autocomplete=\"current-password\"\r\n        required>\r\n      </v-text-field>\r\n      <v-text-field\r\n        v-model=\"confirmPassword\"\r\n        :rules=\"[comparePasswords]\"\r\n        :type=\"'password'\"\r\n        label=\"Confirm password\"\r\n        autocomplete=\"off\"\r\n        required>\r\n      </v-text-field>\r\n    <!--v-select\r\n      v-model=\"select\"\r\n      :items=\"items\"\r\n      :rules=\"[v => !!v || 'Item is required']\"\r\n      label=\"Item\"\r\n      required\r\n    ></v-select-->\r\n    <!--v-checkbox\r\n      v-model=\"checkbox\"\r\n      :rules=\"[v => !!v || 'You must agree to continue!']\"\r\n      label=\"New user?\"\r\n      required\r\n    ></v-checkbox-->\r\n  </v-form>\r\n      </v-flex>\r\n  </v-layout>\r\n    <v-layout justify-center class=\"buttons text-xs-center\">\r\n      <v-flex xs5 d-flex>\r\n        <v-btn :disabled=\"!valid\"\r\n          @click.prevent=\"signUp\"\r\n          class=\"white--text\"\r\n          large\r\n          color=\"orange\">\r\n          register\r\n        </v-btn>\r\n      </v-flex>\r\n      <v-flex xs5 d-flex>\r\n        <v-btn @click=\"clear\"\r\n          class=\"button white--text\"\r\n          large\r\n          color=\"purple darken-1\">\r\n          clear\r\n        </v-btn>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport db from './firebaseInit'\r\nimport firebaseConfig from './firebaseConfig'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/auth'\r\nimport closeButton from '../components/CloseBtn'\r\n\r\nexport default {\r\n  name: 'register',\r\n  data: () => ({\r\n    users: [],\r\n    errorMessage: '',\r\n    pageTitle: 'Register',\r\n    valid: true,\r\n    name: '',\r\n    nameRules: [\r\n      v => (!v || v.length <= 10) || 'Name must be less than 10 characters'\r\n    ],\r\n    email: '',\r\n    emailRules: [\r\n      v => !!v || 'E-mail is required',\r\n      v => /.+@.+/.test(v) || 'E-mail must be valid'\r\n    ],\r\n    password: '',\r\n    passwordRules: [\r\n      v => !!v || 'Password is required',\r\n      v => (v && v.length <= 12) || 'Password must be less than 12 characters'\r\n    ],\r\n    confirmPassword: '',\r\n    select: null,\r\n    items: [\r\n      'Item 1',\r\n      'Item 2',\r\n      'Item 3',\r\n      'Item 4'\r\n    ],\r\n    checkbox: false\r\n  }),\r\n  components: {\r\n    closeButton\r\n  },\r\n  computed: {\r\n    comparePasswords () {\r\n      return this.password !== this.confirmPassword ? 'Passwords do not match' : true\r\n    }\r\n  },\r\n  methods: {\r\n    signUp () {\r\n      this.errorMessage = '' // clear error message?\r\n      if (this.email && this.password) {\r\n        firebase.auth().createUserWithEmailAndPassword(this.email, this.password)\r\n          .then(response => {\r\n            // set current user in store\r\n            const newUser = {\r\n              isAuthenticated: true,\r\n              uid: response.user.uid\r\n            }\r\n            this.$store.commit('setUser', newUser)\r\n            // add new user data to db\r\n            if (this.name === '') { // it is optional, privacy meh\r\n              this.name = 'Anonymous' // get default name??\r\n            }\r\n\r\n            let hiScoreToSet = localStorage.getItem('highestScore')\r\n            let scoresArrayToSet\r\n            let schoolResultsToSet\r\n            if (hiScoreToSet) {\r\n              scoresArrayToSet = localStorage.getItem('lastScoresArray')\r\n              schoolResultsToSet = localStorage.getItem('schoolScores') // !do something about naming here\r\n            } else {\r\n              hiScoreToSet = ''\r\n              scoresArrayToSet = ''\r\n              schoolResultsToSet = ''\r\n            }\r\n\r\n            const newUserData = {\r\n              name: this.name, // or maybe Anonymous\r\n              uid: response.user.uid,\r\n              email: response.user.email,\r\n              // resultsArray: [123, 432, 554], // or not\r\n              // hiScore: 478 // if he played more than one game\r\n              hiScore: hiScoreToSet,\r\n              resultsArray: scoresArrayToSet,\r\n              schoolResultsArray: schoolResultsToSet\r\n            }\r\n            this.addNewUser(newUserData)\r\n            // localStorage.setItem('userName', this.name)\r\n            this.$store.state.user.name = this.name\r\n            // this.addNewUser(response.user.email, response.user.uid, this.name)\r\n            console.log(`User added ${response.user.email}`)\r\n            this.verifyUserEmail()\r\n            this.$router.push('/')\r\n            /*\r\n            firebase\r\n              .auth()\r\n              .signInWithEmailAndPassword(this.email, this.password)\r\n              .then(\r\n                response => {\r\n                  console.log(`Login in after registration`)\r\n                  console.log(response.user.email)\r\n                  this.$router.push('/')\r\n                },\r\n                err => {\r\n                  console.dir(err)\r\n                  this.errorMessage = err.message\r\n                })\r\n              */\r\n          })\r\n          .catch(err => {\r\n            console.log(err.message)\r\n            this.errorMessage = err.message\r\n          })\r\n      }\r\n    },\r\n    addNewUser (userData) {\r\n      console.log(`Adding user`)\r\n      // Add a new document with a generated id.\r\n      const newUserRef = db.collection('users').doc()\r\n      /*\r\n      let newUserData = {\r\n        name: 'Anonymous',\r\n        userEmail: 'hank@aol.com',\r\n        userUid: 'fgdfgDFGDFGvsdf3',\r\n        // dateExample: new Date('December 10, 1815'),\r\n        userResults: [234, 432, 543]\r\n      }\r\n      */\r\n      // later...\r\n      // console.dir(this.$store.state.user.uid)\r\n      // userData.ownerId = newUserRef.id\r\n      newUserRef.set(userData)\r\n      console.log('Document successfully written!')\r\n    }, // end of user adding\r\n    verifyUserEmail () {\r\n      let user = firebase.auth().currentUser\r\n      user.sendEmailVerification().then(function () {\r\n        console.log('Email sent')\r\n      }).catch(function (error) {\r\n        console.log(`Error! ${error}`)\r\n      })\r\n    },\r\n    clear () {\r\n      this.$refs.form.reset()\r\n    }\r\n  },\r\n  created () {\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig)\r\n    }\r\n    console.log(`Register page created`)\r\n    /*\r\n    db.collection('users').get().then(querySnapshot => {\r\n      querySnapshot.forEach(doc => {\r\n        console.log(doc.id)\r\n        const data = {\r\n          'id': doc.id,\r\n          'name': doc.data().name,\r\n          'type': doc.data().type\r\n        }\r\n        console.log(data)\r\n        this.users.push(data)\r\n      })\r\n    }) */\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/scss/index.scss';\r\n\r\n.register-title, .register-form, .buttons {\r\n  font-family: $text-font;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Register.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"column\":\"\",\"id\":\"register\",\"pa-2\":\"\",\"pt-3\":\"\"}},[_c('v-spacer'),_vm._v(\" \"),_c('closeButton'),_vm._v(\" \"),_c('v-alert',{attrs:{\"value\":_vm.errorMessage,\"dismissible\":\"\",\"outline\":\"\",\"type\":\"error\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.errorMessage)+\"\\n  \")]),_vm._v(\" \"),_c('v-flex',{staticClass:\"register-title text-xs-center\"},[_c('h1',[_vm._v(_vm._s(_vm.pageTitle))])]),_vm._v(\" \"),_c('v-layout',{staticClass:\"register-form\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs8\":\"\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.nameRules,\"counter\":10,\"label\":\"Name\",\"autocomplete\":\"username\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":_vm.emailRules,\"label\":\"E-mail\",\"autocomplete\":\"email\",\"required\":\"\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"type\":'password',\"rules\":_vm.passwordRules,\"label\":\"Password\",\"autocomplete\":\"current-password\",\"required\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"rules\":[_vm.comparePasswords],\"type\":'password',\"label\":\"Confirm password\",\"autocomplete\":\"off\",\"required\":\"\"},model:{value:(_vm.confirmPassword),callback:function ($$v) {_vm.confirmPassword=$$v},expression:\"confirmPassword\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{staticClass:\"buttons text-xs-center\",attrs:{\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\"}},[_c('v-btn',{staticClass:\"white--text\",attrs:{\"disabled\":!_vm.valid,\"large\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){$event.preventDefault();return _vm.signUp($event)}}},[_vm._v(\"\\n        register\\n      \")])],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs5\":\"\",\"d-flex\":\"\"}},[_c('v-btn',{staticClass:\"button white--text\",attrs:{\"large\":\"\",\"color\":\"purple darken-1\"},on:{\"click\":_vm.clear}},[_vm._v(\"\\n        clear\\n      \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8c384d36\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Register.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}