(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{102:function(t,e,s){"use strict";e.a={functional:!0,render(t,e){const{_c:s,_v:o,data:a,children:n=[]}=e,{class:r,staticClass:c,style:l,staticStyle:i,attrs:g={},...u}=a;return s("svg",{class:[r,c],style:[l,i],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},g),...u},n.concat([s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}})]))}}},104:function(t,e,s){"use strict";var o=s(97);s.n(o).a},105:function(t,e,s){(t.exports=s(21)(!1)).push([t.i,'@font-face{font-family:\'Quicksand\';font-style:normal;font-weight:400;font-display:swap;src:local("Quicksand Regular"),local("Quicksand-Regular"),url(https://fonts.gstatic.com/s/quicksand/v8/6xKtdSZaM9iE8KbpRA_hK1QN.woff2) format("woff2");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:\'Montserrat\';font-style:normal;font-weight:400;font-display:swap;src:local("Montserrat Regular"),local("Montserrat-Regular"),url(https://fonts.gstatic.com/s/montserrat/v12/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116}.cloud-icon[data-v-e05468a4]{fill:#FF9800}.offline-message[data-v-e05468a4]{border:1px solid #7B1FA2}.offline-message-text[data-v-e05468a4]{font-size:1.2em;font-family:"Quicksand","Verdana",sans-serif;color:#301246}\n',""])},107:function(t,e,s){"use strict";e.a={functional:!0,render(t,e){const{_c:s,_v:o,data:a,children:n=[]}=e,{class:r,staticClass:c,style:l,staticStyle:i,attrs:g={},...u}=a;return s("svg",{class:[r,c],style:[l,i],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},g),...u},n.concat([s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z"}})]))}}},110:function(t,e,s){var o=s(130);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,s(33).default)("67823e93",o,!0,{})},115:function(t,e,s){"use strict";var o={name:"NetworkCheck",components:{cloudOffIcon:{functional:!0,render(t,e){const{_c:s,_v:o,data:a,children:n=[]}=e,{class:r,staticClass:c,style:l,staticStyle:i,attrs:g={},...u}=a;return s("svg",{class:[r,c],style:[l,i],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},g),...u},n.concat([s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),s("path",{attrs:{d:"M19.35 10.04A7.49 7.49 0 0 0 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46a5.497 5.497 0 0 1 8.05 4.87v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"}})]))}},doneIcon:s(98).a},data:function(){return{offlineMessage:!1}},computed:{networkStatus:function(){return this.isOnline?"ok":null}}},a=(s(104),s(34)),n=Object(a.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.networkStatus?t._e():s("v-dialog",{attrs:{width:"20em"},model:{value:t.offlineMessage,callback:function(e){t.offlineMessage=e},expression:"offlineMessage"}},[s("v-btn",{attrs:{slot:"activator",icon:"","aria-label":"network check"},slot:"activator"},[s("cloudOffIcon",{staticClass:"cloud-icon blink"})],1),t._v(" "),s("v-card",{staticClass:"offline-message"},[s("v-card-text",{staticClass:"offline-message-text"},[t._v("\n      Check your connection to save results.\n    ")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"orange",flat:"",outline:"",ripple:""},on:{click:function(e){t.offlineMessage=!1}}},[s("doneIcon",{staticClass:"highlighted"})],1)],1)],1)],1)},[],!1,null,"e05468a4",null);e.a=n.exports},129:function(t,e,s){"use strict";var o=s(110);s.n(o).a},130:function(t,e,s){(t.exports=s(21)(!1)).push([t.i,'@font-face{font-family:\'Quicksand\';font-style:normal;font-weight:400;font-display:swap;src:local("Quicksand Regular"),local("Quicksand-Regular"),url(https://fonts.gstatic.com/s/quicksand/v8/6xKtdSZaM9iE8KbpRA_hK1QN.woff2) format("woff2");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:\'Montserrat\';font-style:normal;font-weight:400;font-display:swap;src:local("Montserrat Regular"),local("Montserrat-Regular"),url(https://fonts.gstatic.com/s/montserrat/v12/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116}.default use[data-v-69a8f106]{color:#7B1FA2;stroke:#7B1FA2}.chosen use[data-v-69a8f106]{color:#FF9800;stroke:#FF9800}.highlighted[data-v-69a8f106]{color:#FF9800;fill:#FF9800}.default-icon-color[data-v-69a8f106]{color:#7B1FA2;fill:#7B1FA2}.user-name-game-end[data-v-69a8f106],.message-school[data-v-69a8f106],.message-game[data-v-69a8f106],.offline-save-message[data-v-69a8f106]{font-family:"Quicksand","Verdana",sans-serif}.user-name-game-end span[data-v-69a8f106]{color:#FF9800}.message-school[data-v-69a8f106]{line-height:1.5}.offline-save-message[data-v-69a8f106]{font-size:1.2em}\n',""])},148:function(t,e,s){"use strict";s.r(e);s(55),s(88),s(35),s(94);var o=s(23),a=s(25),n=s(93),r=s(92),c=s(115),l=s(102),i=s(107);function g(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var u={components:{closeBtn:r.a,NetworkCheck:c.a,statsIcon:i.a,restartIcon:l.a},data:function(){return{message:"Game over,",messageText:"Your score is",graduationMessage:"You can't even finish the school.",schoolScoreMessage:"Your score is",userName:"",highestScore:null,networkProblemDialog:!1,tryAgainBtnLoading:!1,offlineSaveUserMessage:"You are offline,\n        connect to the internet to save results.\n        If you choose to cancel, results are saved\n        in local storage and will be saved to DB\n        next time you finish the game.",hiscoreGreeting:"Your highest score is",exclamation:"!",lastScores:"",schoolScores:"",dbUsersCollRef:"users"}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),o.forEach(function(e){g(t,e,s[e])})}return t}({},Object(o.c)(["getTotalScore","getSchoolScore","getCurrentGameState","getDefaultUserName","getUserData"])),mounted:function(){var t=this;this.$nextTick(function(){console.log("Game over."),t.getUserData.isAuthenticated?t.userName=localStorage.getItem("userName"):t.userName=t.getDefaultUserName,t.getCurrentGameState.gameInProgress?(""===localStorage.getItem("highestScore")?(console.log("No local storage score array exist yet, creating one"),t.highestScore=t.getTotalScore,localStorage.setItem("highestScore",t.getTotalScore),t.addScoreToDatabase()):(t.lastScores=localStorage.getItem("lastScoresArray"),t.schoolScores=localStorage.getItem("schoolScores"),t.highestScore=localStorage.getItem("highestScore"),t.addScoreToDatabase()),a.a.commit("stopGame")):console.log("Nothing to record, play the game.")})},methods:{restartGame:function(){console.log("Restarting game."),a.a.commit("resetState"),this.$router.push("/game")},addScoreToDatabase:function(){console.log("Adding score."),""===this.lastScores?this.lastScores=[]:this.lastScores=this.lastScores.split(","),""===this.schoolScores?this.schoolScores=[]:this.schoolScores=this.schoolScores.split(","),this.getTotalScore>this.highestScore?(this.highestScore=this.getTotalScore,localStorage.setItem("highestScore",this.getTotalScore)):console.log("Your score is not so high: ".concat(this.getTotalScore)),this.getCurrentGameState.schoolCompleted?(this.lastScores.push(this.getTotalScore),localStorage.setItem("lastScoresArray",this.lastScores),this.schoolScores.push(this.getSchoolScore),localStorage.setItem("schoolScores",this.schoolScores)):(this.schoolScores.push(this.getSchoolScore),localStorage.setItem("schoolScores",this.schoolScores)),this.getUserData.isAuthenticated?this.getUserData.isAuthenticated&&this.isOnline?(console.log("User is authenticated and network is online. Syncing with firestore."),this.syncScoreWithFirestore()):this.getUserData.isAuthenticated&&!this.isOnline&&this.getCurrentGameState.gameInProgress?(console.log("User is authenticated but network is offline."),this.toggleNetworkProblemDialog()):console.log("Something went wrong in the piping system."):console.log("Anonymous! To save results please register.")},syncScoreWithFirestore:function(){var t=this;this.tryAgainBtnLoading=!this.tryAgainBtnLoading,console.log("Syncing score for user ".concat(localStorage.getItem("userName")));var e=localStorage.getItem("userUid");n.a.collection(this.dbUsersCollRef).where("uid","==",e).get().then(function(t){var s;return t.forEach(function(t){t.data().uid===e&&(s=t.id)}),s}).then(function(e){var s=n.a.collection(t.dbUsersCollRef).doc(e),o=localStorage.getItem("lastScoresArray"),a=localStorage.getItem("highestScore"),r=localStorage.getItem("schoolScores");return s.update({resultsArray:o,schoolResultsArray:r,hiScore:a}),console.log("...updating user stats"),t.tryAgainBtnLoading=!t.tryAgainBtnLoading,t.networkProblemDialog=!1,!0}).catch(function(e){t.tryAgainBtnLoading=!t.tryAgainBtnLoading,console.log("Error getting documents: ",e)})},toggleNetworkProblemDialog:function(){this.networkProblemDialog=!this.networkProblemDialog}}},h=(s(129),s(34)),f=Object(h.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{id:"endGame","fill-height":"","pa-0":"","mp-0":""}},[s("v-layout",{attrs:{column:""}},[s("closeBtn"),t._v(" "),s("v-flex",{staticClass:"user-name-game-end text-xs-center"},[s("h1",[t._v("\n        "+t._s(t.message)),s("br"),t._v(" "),s("span",[t._v(t._s(t.userName)+t._s(t.exclamation))])])]),t._v(" "),t.getCurrentGameState.schoolCompleted?t._e():s("v-flex",{staticClass:"message-school text-xs-center"},[s("h3",[t._v(t._s(t.graduationMessage))]),t._v(" "),s("h2",[t._v(t._s(t.schoolScoreMessage)+" "+t._s(t.getTotalScore))])]),t._v(" "),t.getCurrentGameState.schoolCompleted?s("v-flex",{staticClass:"message-game text-xs-center"},[s("h2",[t._v(t._s(t.messageText)+" "+t._s(t.getTotalScore))])]):t._e(),t._v(" "),s("v-layout",{attrs:{row:"","align-center":"","justify-space-around":""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{"d-flex":"",xs5:"",lg2:""}},[s("v-btn",{attrs:{ripple:"",outline:"",color:"orange"},on:{click:t.restartGame}},[s("restartIcon",{staticClass:"highlighted"}),t._v("\n          restart\n        ")],1)],1),t._v(" "),s("v-flex",{staticClass:"text-xs-center",attrs:{"d-flex":"",xs5:"",lg2:""}},[s("v-btn",{attrs:{ripple:"",outline:"",color:"purple darken-1",to:"/userstats"}},[s("statsIcon",{staticClass:"default-icon-color"}),t._v("\n          stats\n        ")],1)],1)],1)],1),t._v(" "),s("v-dialog",{attrs:{width:"20em"},model:{value:t.networkProblemDialog,callback:function(e){t.networkProblemDialog=e},expression:"networkProblemDialog"}},[s("v-card",{staticClass:"text-xs-center"},[s("v-flex",{staticStyle:{height:"3em"}},[s("NetworkCheck")],1),t._v(" "),s("v-card-text",{staticClass:"text-xs-center offline-save-message"},[t._v("\n        "+t._s(t.offlineSaveUserMessage)+"\n      ")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"orange",outline:"",loading:t.tryAgainBtnLoading},on:{click:t.syncScoreWithFirestore}},[s("v-icon",{attrs:{color:"orange"}},[t._v("\n            done\n          ")]),t._v("\n          Try again\n        ")],1),t._v(" "),s("v-btn",{attrs:{outline:"",ripple:"",color:"purple darken-1"},on:{click:function(e){t.networkProblemDialog=!1}}},[s("v-icon",{attrs:{color:"purple darken-1"}},[t._v("\n            cancel\n          ")]),t._v("\n          Cancel\n        ")],1),t._v(" "),s("v-spacer")],1)],1)],1)],1)},[],!1,null,"69a8f106",null);e.default=f.exports},87:function(t,e,s){var o=s(91);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,s(33).default)("5c5beb6d",o,!0,{})},88:function(t,e,s){var o=s(36),a=s(13);s(89)("keys",function(){return function(t){return a(o(t))}})},89:function(t,e,s){var o=s(22),a=s(12),n=s(6);t.exports=function(t,e){var s=(a.Object||{})[t]||Object[t],r={};r[t]=e(s),o(o.S+o.F*n(function(){s(1)}),"Object",r)}},90:function(t,e,s){"use strict";var o=s(87);s.n(o).a},91:function(t,e,s){(t.exports=s(21)(!1)).push([t.i,".close-btn[data-v-26d1e6e8]{fill:#7B1FA2}\n",""])},92:function(t,e,s){"use strict";var o={name:"CloseBtn",components:{closeIcon:{functional:!0,render(t,e){const{_c:s,_v:o,data:a,children:n=[]}=e,{class:r,staticClass:c,style:l,staticStyle:i,attrs:g={},...u}=a;return s("svg",{class:[r,c],style:[l,i],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"33",height:"33",viewBox:"0 0 24 24"},g),...u},n.concat([s("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}),s("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})]))}}}},a=(s(90),s(34)),n=Object(a.a)(o,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-flex",{staticClass:"text-xs-right"},[s("v-btn",{attrs:{small:"",icon:"",fab:"",dark:""},on:{click:function(e){return t.$router.go(-1)}}},[s("closeIcon",{staticClass:"close-btn"})],1)],1)},[],!1,null,"26d1e6e8",null);e.a=n.exports},93:function(t,e,s){"use strict";var o=s(15),a=s.n(o);s(99);a.a.firestore().settings({timestampsInSnapshots:!0}),e.a=a.a.firestore()},94:function(t,e,s){s(95)("split",2,function(t,e,o){"use strict";var a=s(96),n=o,r=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var c=void 0===/()??/.exec("")[1];o=function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(s,t,e);var o,l,i,g,u,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,f+"g");for(c||(o=new RegExp("^"+m.source+"$(?!\\s)",f));(l=m.exec(s))&&!((i=l.index+l[0].length)>d&&(h.push(s.slice(d,l.index)),!c&&l.length>1&&l[0].replace(o,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(l[u]=void 0)}),l.length>1&&l.index<s.length&&r.apply(h,l.slice(1)),g=l[0].length,d=i,h.length>=v));)m.lastIndex===l.index&&m.lastIndex++;return d===s.length?!g&&m.test("")||h.push(""):h.push(s.slice(d)),h.length>v?h.slice(0,v):h}}else"0".split(void 0,0).length&&(o=function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)});return[function(s,a){var n=t(this),r=null==s?void 0:s[e];return void 0!==r?r.call(s,n,a):o.call(String(n),s,a)},o]})},95:function(t,e,s){"use strict";var o=s(4),a=s(14),n=s(6),r=s(38),c=s(3);t.exports=function(t,e,s){var l=c(t),i=s(r,l,""[t]),g=i[0],u=i[1];n(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,g),o(RegExp.prototype,l,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}))}},96:function(t,e,s){var o=s(10),a=s(37),n=s(3)("match");t.exports=function(t){var e;return o(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==a(t))}},97:function(t,e,s){var o=s(105);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,s(33).default)("26bd3262",o,!0,{})},98:function(t,e,s){"use strict";e.a={functional:!0,render(t,e){const{_c:s,_v:o,data:a,children:n=[]}=e,{class:r,staticClass:c,style:l,staticStyle:i,attrs:g={},...u}=a;return s("svg",{class:[r,c],style:[l,i],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},g),...u},n.concat([s("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),s("path",{attrs:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}})]))}}}}]);
//# sourceMappingURL=endgame.4efe0915acd0b90cd2cf.js.map