(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{123:function(t,e,o){var n=o(138);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(15).default)("2d00a816",n,!0,{})},124:function(t,e,o){"use strict";var n=o(25),s=o.n(n);o(129);s.a.firestore().settings({timestampsInSnapshots:!0}),e.a=s.a.firestore()},137:function(t,e,o){"use strict";var n=o(123);o.n(n).a},138:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,".error-message[data-v-1e4029f1]{position:fixed;top:3.5em;margin:0em 1em 0em 1em;right:0;left:0;border:0.066em solid #ffbdbd;color:#ff5050;padding-left:.5em;border-radius:.2em;font-size:1em}.error-close-icon[data-v-1e4029f1]{fill:#ffbdbd}\n",""])},145:function(t,e,o){var n=o(8).f,s=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in s||o(9)&&n(s,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},146:function(t,e,o){var n=o(167);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,o(15).default)("25b5cef2",n,!0,{})},148:function(t,e,o){"use strict";o(32),o(42),o(65);var n=o(16);function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){r(t,e,o[e])})}return t}function r(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a={name:"ErrorMessage",components:{closeIcon:{functional:!0,render(t,e){const{_c:o,_v:n,data:s,children:r=[]}=e,{class:a,staticClass:i,style:l,staticStyle:c,attrs:u={},...f}=s;return o("svg",{class:[a,i],style:[l,c],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"33",height:"33",viewBox:"0 0 24 24"},u),...f},r.concat([o("path",{attrs:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}),o("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})]))}}},computed:s({},Object(n.c)(["error"])),methods:s({},Object(n.b)(["setErrorMessage"]),{closeErrorMessage:function(){this.$store.dispatch("setErrorMessage",!1)}})},i=(o(137),o(13)),l=Object(i.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return this.error?e("v-layout",{staticClass:"error-message",attrs:{"align-center":""}},[e("v-flex",{staticClass:"text-xs-left",attrs:{xs10:"","d-flex":""}},[this._v("\n    "+this._s(this.error.message)+"\n  ")]),this._v(" "),e("v-flex",{attrs:{xs2:"","d-flex":"","justify-center":""}},[e("v-btn",{attrs:{flat:"",icon:""},on:{click:this.closeErrorMessage}},[e("closeIcon",{staticClass:"error-close-icon"})],1)],1)],1):this._e()},[],!1,null,"1e4029f1",null);e.a=l.exports},166:function(t,e,o){"use strict";var n=o(146);o.n(n).a},167:function(t,e,o){(t.exports=o(12)(!1)).push([t.i,'@font-face{font-family:\'Quicksand\';font-style:normal;font-weight:400;font-display:swap;src:local("Quicksand Regular"),local("Quicksand-Regular"),url(https://fonts.gstatic.com/s/quicksand/v8/6xKtdSZaM9iE8KbpRA_hK1QN.woff2) format("woff2");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:\'Montserrat\';font-style:normal;font-weight:400;font-display:swap;src:local("Montserrat Regular"),local("Montserrat-Regular"),url(https://fonts.gstatic.com/s/montserrat/v12/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116}.default use{color:#7B1FA2;stroke:#7B1FA2}.chosen use{color:#FF9800;stroke:#FF9800}.highlighted{color:#FF9800;fill:#FF9800}.default-icon-color{color:#7B1FA2;fill:#7B1FA2}.login-form,.page-title,.info-text,.button{font-family:"Quicksand","Verdana",sans-serif}.info-text{color:#7B1FA2;font-size:1.4em;font-weight:700}\n',""])},182:function(t,e,o){"use strict";o.r(e);o(44),o(45),o(42),o(65),o(145),o(32);var n=o(148),s=o(16),r=o(25),a=o.n(r),i=o(124);o(67);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u={name:"Login",components:{errorMessageDialog:n.a},data:function(){return{loggingIn:!1,signingOut:!1,newUserBtnText:"Register",pageTitle:"Log In",valid:!0,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],password:"",showPass:!1,passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6&&t.length<=12||"Password must be greater than 6 and less than 12."}],usersCollRef:"users"}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(e){c(t,e,o[e])})}return t}({},Object(s.c)(["getUserAuthState"])),mounted:function(){this.$nextTick(function(){console.log("Login page mounted.")})},methods:{login:function(){var t=this;if(console.log("Signing user in."),this.email&&this.password)return this.toggleButtonLoadingState("login"),a.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.getUserDataFromDB(e.user.uid)}).then(function(){t.toggleButtonLoadingState("login"),t.$router.push("/game")}).catch(function(e){return t.$store.dispatch("setErrorMessage",e),t.toggleButtonLoadingState("login"),!1}),!0},signOut:function(){var t=this;console.log("Signing user out."),this.toggleButtonLoadingState("signout"),a.a.auth().signOut().then(function(){t.$store.commit("setUserIsLoggedIn",!1),localStorage.clear(),t.toggleButtonLoadingState("signout")}).catch(function(e){t.$store.dispatch("setErrorMessage",e),t.toggleButtonLoadingState("signout")})},getUserDataFromDB:function(t){var e=this;i.a.collection(this.usersCollRef).where("uid","==",t).get().then(function(e){e.forEach(function(e){e.data().uid===t&&(localStorage.setItem("userName",e.data().name),localStorage.setItem("userUid",e.data().uid),localStorage.setItem("highestScore",e.data().hiScore),localStorage.setItem("lastScoresArray",e.data().resultsArray),localStorage.setItem("schoolScores",e.data().schoolResultsArray))})}).catch(function(t){e.$store.dispatch("setErrorMessage",t),console.log("Error getting documents: ",t)})},toggleButtonLoadingState:function(t){return"login"===t?(this.loggingIn=!this.loggingIn,!0):"signout"===t?(this.signingOut=!this.signingOut,!0):(console.log("Nothing to toggle, button is ".concat("undefined"==typeof button?"undefined":l(button))),!1)},clearForm:function(){this.$refs.form.reset()}}},f=(o(166),o(13)),g=Object(f.a)(u,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{staticClass:"text-xs-center",attrs:{id:"login",fluid:"","py-2":"","px-4":""}},[o("v-layout",{attrs:{column:""}},[o("errorMessageDialog"),t._v(" "),o("v-flex",{staticClass:"page-title py-4",attrs:{"d-flex":""}},[o("h1",[t._v(t._s(t.pageTitle))])]),t._v(" "),o("v-layout",{staticClass:"login-form py-4",attrs:{"justify-center":""}},[o("v-flex",{attrs:{xs9:"","d-flex":"","align-center":"","py-4":""}},[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",type:"email",autocomplete:"off",required:"",color:"purple accent-4"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),o("v-text-field",{attrs:{rules:t.passwordRules,"append-icon":t.showPass?"mdi-eye":"mdi-eye-off",type:t.showPass?"text":"password",label:"Password",autocomplete:"off",required:"",color:"purple accent-4",hint:"At least 6 characters"},on:{"click:append":function(e){t.showPass=!t.showPass}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1),t._v(" "),o("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[o("v-flex",{attrs:{"d-flex":"",xs5:""}},[o("v-btn",{staticClass:"button white--text",attrs:{type:"submit",loading:t.loggingIn,disabled:t.getUserAuthState,outline:"",ripple:"",color:"orange"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("\n          login\n        ")])],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:""}},[o("v-btn",{staticClass:"button white--text",attrs:{disabled:t.valid,outline:"",ripple:"",color:"purple darken-1"},on:{click:t.clearForm}},[t._v("\n          clear\n        ")])],1),t._v(" "),o("v-flex",{staticClass:"info-text",attrs:{xs12:"","py-4":"","align-center":""}},[o("v-divider")],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:""}},[o("v-btn",{staticClass:"button white--text",attrs:{loading:t.signingOut,disabled:!t.getUserAuthState,outline:"",ripple:"",color:"purple darken-1"},on:{click:t.signOut}},[t._v("\n          log out\n        ")])],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:""}},[o("v-btn",{staticClass:"button white--text",attrs:{to:"/register",outline:"",ripple:"",color:"purple darken-1"}},[t._v("\n          "+t._s(t.newUserBtnText)+"\n        ")])],1)],1)],1)],1)},[],!1,null,null,null);e.default=g.exports}}]);
//# sourceMappingURL=login.7a922911092f41a1bf9a.js.map