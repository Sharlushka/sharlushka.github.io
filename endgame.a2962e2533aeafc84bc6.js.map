{"version":3,"sources":["webpack:///./src/views/EndGame.vue?3a46","webpack:///./src/views/EndGame.vue?b5b2","webpack:///./src/views/EndGame.vue?f551","webpack:///./src/assets/icons/baseline-cancel-24px.svg","webpack:///src/views/EndGame.vue","webpack:///./src/views/EndGame.vue?532a","webpack:///./src/views/EndGame.vue","webpack:///./src/views/EndGame.vue?c859"],"names":["content","__webpack_require__","module","i","locals","exports","add","default","push","baseline_cancel_24px","functional","[object Object]","_h","_vm","_c","_v","data","children","class","classNames","staticClass","style","staticStyle","attrs","rest","Object","assign","xmlns","width","height","concat","fill","d","views_EndGamevue_type_script_lang_js_","components","NetworkCheck","restartIcon","baseline_replay_24px","cancelIcon","message","messageText","graduationMessage","schoolScoreMessage","userName","highestScore","networkProblemDialog","tryAgainBtnLoading","offlineSaveUserMessage","exclamation","lastScores","schoolScores","combinationsFavs","dbUsersCollRef","computed","_objectSpread","vuex_esm","mounted","_this","this","$nextTick","console","log","getUserData","isAuthenticated","localStorage","getItem","getDefaultUserName","isGameEnded","getTotalScore","setItem","addScoreToDatabase","$store","dispatch","then","methods","restartGame","store","commit","$router","split","map","Number","getCurrentGameState","schoolCompleted","getSchoolScore","currentGameCombinationsFavs","getCurrentNonZeroCombinations","index","state","user","diceValuesFavs","isOnline","syncScoreWithFirestore","toggleNetworkProblemDialog","_this2","uid","firebaseInit","collection","where","get","querySnapshot","docToUpdateId","forEach","doc","id","docRef","resultsArrayToUpdate","highestScoreToUpdate","schoolScoresToUpdate","update","resultsArray","schoolResultsArray","hiScore","catch","error","component","componentNormalizer","$createElement","_self","fill-height","pa-0","mp-0","column","align-center","d-flex","_s","_e","row","justify-space-around","xs6","lg2","ripple","outline","color","on","click","$event","model","value","callback","$$v","expression","loading","__webpack_exports__","_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_EndGame_vue_vue_type_style_index_0_id_7bf9d951_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","n"],"mappings":"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","file":"endgame.a2962e2533aeafc84bc6.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndGame.vue?vue&type=style&index=0&id=7bf9d951&lang=scss&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2268fd4f\", content, true, {});","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:local(\\\"Quicksand Regular\\\"),local(\\\"Quicksand-Regular\\\"),url(https://fonts.gstatic.com/s/quicksand/v8/6xKtdSZaM9iE8KbpRA_hK1QN.woff2) format(\\\"woff2\\\");unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Montserrat';font-style:normal;font-weight:400;font-display:swap;src:local(\\\"Montserrat Regular\\\"),local(\\\"Montserrat-Regular\\\"),url(https://fonts.gstatic.com/s/montserrat/v12/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format(\\\"woff2\\\");unicode-range:U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116}*[data-v-7bf9d951]{font-family:\\\"Quicksand\\\",\\\"Verdana\\\",sans-serif}.highlighted[data-v-7bf9d951]{color:#FF9800 !important}.default-icon-color[data-v-7bf9d951]{color:#7B1FA2}.button[data-v-7bf9d951]{border-radius:.3em;line-height:2em}.button-icon-margin[data-v-7bf9d951]{margin:.3em}.dialog[data-v-7bf9d951]{font-size:1.3em;border-radius:.3em;border:0.1em solid #7B4B9D !important}.input-icon[data-v-7bf9d951]{color:#e4c2ff}.default-text-color[data-v-7bf9d951]{color:#7B1FA2}.user-name-game-end span[data-v-7bf9d951]{color:#FF9800}.message-school[data-v-7bf9d951]{line-height:1.5}.network-check-background[data-v-7bf9d951]{height:3em}.offline-dialog[data-v-7bf9d951]{border-radius:.3em;border:0.1em solid #7B1FA2}.offline-dialog-message[data-v-7bf9d951]{padding-top:0em;font-size:1.2em;color:#301246}\\n\", \"\"]);\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"id\":\"endGame\",\"fill-height\":\"\",\"pa-0\":\"\",\"mp-0\":\"\"}},[_c('v-layout',{attrs:{\"column\":\"\"}},[_c('v-flex',{staticClass:\"user-name-game-end text-xs-center\",attrs:{\"align-center\":\"\",\"d-flex\":\"\"}},[_c('h1',[_vm._v(\"\\n        \"+_vm._s(_vm.message)),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.userName)+_vm._s(_vm.exclamation))])])]),_vm._v(\" \"),(!_vm.getCurrentGameState.schoolCompleted)?_c('v-flex',{staticClass:\"message-school text-xs-center\"},[_c('h3',[_vm._v(_vm._s(_vm.graduationMessage))]),_vm._v(\" \"),_c('h2',[_vm._v(_vm._s(_vm.schoolScoreMessage)+\" \"+_vm._s(_vm.getTotalScore))])]):_vm._e(),_vm._v(\" \"),(_vm.getCurrentGameState.schoolCompleted)?_c('v-flex',{staticClass:\"message-game text-xs-center\"},[_c('h2',[_vm._v(_vm._s(_vm.messageText)+\" \"),_c('span',{staticClass:\"highlighted\"},[_vm._v(_vm._s(_vm.getTotalScore))])])]):_vm._e(),_vm._v(\" \"),_c('v-layout',{attrs:{\"row\":\"\",\"align-center\":\"\",\"justify-space-around\":\"\"}},[_c('v-flex',{staticClass:\"text-xs-center\",attrs:{\"d-flex\":\"\",\"xs6\":\"\",\"lg2\":\"\"}},[_c('v-btn',{staticClass:\"button\",attrs:{\"ripple\":\"\",\"outline\":\"\",\"color\":\"orange\"},on:{\"click\":function($event){return _vm.restartGame()}}},[_c('restartIcon',{staticClass:\"highlighted button-icon-margin\"}),_vm._v(\"\\n          restart\\n        \")],1)],1)],1)],1),_vm._v(\" \"),_c('v-dialog',{attrs:{\"width\":\"20em\"},model:{value:(_vm.networkProblemDialog),callback:function ($$v) {_vm.networkProblemDialog=$$v},expression:\"networkProblemDialog\"}},[_c('v-card',{staticClass:\"text-xs-center offline-dialog\"},[_c('v-flex',{staticClass:\"network-check-background pt-1\"},[_c('NetworkCheck')],1),_vm._v(\" \"),_c('v-card-text',{staticClass:\"text-xs-left offline-dialog-message\"},[_vm._v(\"\\n        \"+_vm._s(_vm.offlineSaveUserMessage)+\"\\n      \")]),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{staticClass:\"button\",attrs:{\"color\":\"orange\",\"outline\":\"\",\"loading\":_vm.tryAgainBtnLoading},on:{\"click\":_vm.syncScoreWithFirestore}},[_c('restartIcon',{staticClass:\"highlighted\"}),_vm._v(\"\\n          Try again\\n        \")],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"button\",attrs:{\"outline\":\"\",\"ripple\":\"\",\"color\":\"purple darken-2\"},on:{\"click\":function($event){_vm.networkProblemDialog = false}}},[_c('cancelIcon',{staticClass:\"default-icon-color\"}),_vm._v(\"\\n          Cancel\\n        \")],1),_vm._v(\" \"),_c('v-spacer')],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n      export default {\n        functional: true,\n        render(_h, _vm) {\n          const { _c, _v, data, children = [] } = _vm;\n\n          const {\n            class: classNames,\n            staticClass,\n            style,\n            staticStyle,\n            attrs = {},\n            ...rest\n          } = data;\n\n          return _c(\n            'svg',\n            {\n              class: [classNames,staticClass],\n              style: [style,staticStyle],\n              attrs: Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\"}, attrs),\n              ...rest,\n            },\n            children.concat([_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"}}),_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}})])\n          )\n        }\n      }\n    ","<template>\n  <v-container\n    id=\"endGame\"\n    fill-height\n    pa-0\n    mp-0\n  >\n    <v-layout\n      column\n    >\n      <!-- Messages -->\n      <v-flex\n        class=\"user-name-game-end text-xs-center\"\n        align-center\n        d-flex\n      >\n        <h1>\n          {{ message }}<br>\n          <span>{{ userName }}{{ exclamation }}</span>\n        </h1>\n      </v-flex>\n      <!-- School message -->\n      <v-flex\n        v-if=\"!getCurrentGameState.schoolCompleted\"\n        class=\"message-school text-xs-center\"\n      >\n        <h3>{{ graduationMessage }}</h3>\n        <h2>{{ schoolScoreMessage }} {{ getTotalScore }}</h2>\n      </v-flex>\n      <!-- Game message -->\n      <v-flex\n        v-if=\"getCurrentGameState.schoolCompleted\"\n        class=\"message-game text-xs-center\"\n      >\n        <h2>{{ messageText }} <span class=\"highlighted\">{{ getTotalScore }}</span></h2>\n      </v-flex>\n      <!-- Buttons -->\n      <v-layout\n        row\n        align-center\n        justify-space-around\n      >\n        <v-flex\n          d-flex\n          xs6\n          lg2\n          class=\"text-xs-center\"\n        >\n          <v-btn\n            ripple\n            outline\n            color=\"orange\"\n            class=\"button\"\n            @click=\"restartGame()\"\n          >\n            <restartIcon class=\"highlighted button-icon-margin\" />\n            restart\n          </v-btn>\n        </v-flex>\n      </v-layout>\n    </v-layout>\n    <!-- Offline save dialog -->\n    <v-dialog\n      v-model=\"networkProblemDialog\"\n      width=\"20em\"\n    >\n      <v-card class=\"text-xs-center offline-dialog\">\n        <v-flex class=\"network-check-background pt-1\">\n          <NetworkCheck />\n        </v-flex>\n        <v-card-text\n          class=\"text-xs-left offline-dialog-message\"\n        >\n          {{ offlineSaveUserMessage }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn\n            color=\"orange\"\n            outline\n            :loading=\"tryAgainBtnLoading\"\n            class=\"button\"\n            @click=\"syncScoreWithFirestore\"\n          >\n            <restartIcon class=\"highlighted\" />\n            Try again\n          </v-btn>\n          <v-btn\n            outline\n            ripple\n            color=\"purple darken-2\"\n            class=\"button\"\n            @click=\"networkProblemDialog = false\"\n          >\n            <cancelIcon class=\"default-icon-color\" />\n            Cancel\n          </v-btn>\n          <v-spacer />\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport store from '../store/store' // $this.store?\nimport db from '../firebase/firebaseInit'\nimport NetworkCheck from '../components/NetworkCheck.vue'\nimport restartIcon from '../assets/icons/baseline-replay-24px.svg'\nimport cancelIcon from '../assets/icons/baseline-cancel-24px.svg'\n\nexport default {\n  components: {\n    NetworkCheck,\n    restartIcon,\n    cancelIcon\n  },\n  data() {\n    return {\n      message: `Game over,`,\n      messageText: `Your score is`,\n      graduationMessage: `You can't even finish the school.`,\n      schoolScoreMessage: `Your score is`,\n      userName: ``,\n      highestScore: null,\n      networkProblemDialog: false,\n      tryAgainBtnLoading: false,\n      offlineSaveUserMessage: `You are offline,\n        connect to the internet to save results.\n        If you choose to cancel, results are saved\n        in local storage and will be saved to DB\n        next time you finish the game.`,\n      // hiscoreGreeting: `Your highest score is`,\n      exclamation: `!`, // some over-engeneering\n      lastScores: ``,\n      schoolScores: ``,\n      combinationsFavs: ``,\n      dbUsersCollRef: `users`\n    }\n  },\n  computed: {\n    ...mapGetters([\n      `getTotalScore`,\n      `getSchoolScore`,\n      `getCurrentGameState`,\n      `getDefaultUserName`,\n      `getUserData`,\n      `isGameEnded`,\n      `getCurrentNonZeroCombinations`\n    ])\n  },\n  mounted() {\n    this.$nextTick(() => {\n      console.log(`Game over view mounted.`)\n      // check user auth status\n      if (this.getUserData.isAuthenticated) {\n        this.userName = localStorage.getItem(`userName`)\n      } else {\n        this.userName = this.getDefaultUserName\n      }\n      if (this.isGameEnded) {\n        // collect them when game finished\n        // i.e. user played the game till the end\n        // and not actually reloading the page\n        if (localStorage.getItem(`highestScore`) === ``) {\n          // check if user ever played a game\n          console.log(`No local storage score array exist yet, creating one`)\n          this.highestScore = this.getTotalScore // first run\n          localStorage.setItem(`highestScore`, this.getTotalScore)\n          // and\n          this.addScoreToDatabase()\n        } else {\n          this.lastScores = localStorage.getItem(`lastScoresArray`)\n          this.schoolScores = localStorage.getItem(`schoolScores`)\n          this.highestScore = localStorage.getItem(`highestScore`)\n          this.combinationsFavs = localStorage.getItem(`combinationsFavs`)\n          // just add it already\n          this.addScoreToDatabase()\n        }\n        this.$store.dispatch(`setLastSave`, true).then(() => {\n          // don't show dice box after saving results\n          // till reset\n          console.log(`This was the last save until reset.`)\n        })\n        this.$store.dispatch(`resetGameOver`, false).then(() => {\n          // set to default state so repeating visits\n          // to this page won't fill our array with zeroes\n          console.log(`Resetting game over.`)\n        })\n      } else {\n        console.log(`Nothing to record, play the game.`)\n      }\n    })\n  },\n  methods: {\n    ...mapActions([\n      `resetGameOver`,\n      `setLastSave`\n    ]),\n    restartGame() {\n      console.log(`Restarting game.`)\n      store.commit(`resetState`)\n      this.$router.push(`/game`)\n    },\n    // add anonymous score to local storage\n    addScoreToDatabase() {\n      console.log(`Adding score.`)\n      // one function?\n      if (this.lastScores === ``) {\n        this.lastScores = [] // first run\n      } else {\n        this.lastScores = this.lastScores.split(`,`)\n      }\n      if (this.schoolScores === ``) {\n        this.schoolScores = []\n      } else {\n        this.schoolScores = this.schoolScores.split(`,`)\n      }\n      if (this.combinationsFavs === ``) {\n        this.combinationsFavs = [0, 0, 0, 0, 0, 0, 0, 0, 0]\n      } else {\n        this.combinationsFavs = this.combinationsFavs.split(`,`).map(Number)\n      }\n      // check for new highest score\n      if (this.getTotalScore > this.highestScore) {\n        this.highestScore = this.getTotalScore\n        localStorage.setItem(`highestScore`, this.getTotalScore)\n      } else {\n        console.log(`Your score is not so high: ${this.getTotalScore}`)\n      }\n      if (this.getCurrentGameState.schoolCompleted) {\n        // record game result if school completed\n        this.lastScores.push(this.getTotalScore)\n        localStorage.setItem(`lastScoresArray`, this.lastScores)\n        // and school result for stats\n        this.schoolScores.push(this.getSchoolScore)\n        localStorage.setItem(`schoolScores`, this.schoolScores)\n        // and update game combinations favs\n        // get current non zero combinations\n        // console.log(`Current non zero combinations is endgame -->`)\n        const currentGameCombinationsFavs = this.getCurrentNonZeroCombinations\n        // console.log(currentGameCombinationsFavs)\n        for (let index in this.combinationsFavs) {\n          this.combinationsFavs[index] += currentGameCombinationsFavs[index]\n        }\n        localStorage.setItem(`combinationsFavs`, this.combinationsFavs)\n      } else {\n        // game ended in school,\n        // so we have only school result to save\n        this.schoolScores.push(this.getSchoolScore)\n        localStorage.setItem(`schoolScores`, this.schoolScores)\n      }\n      // save updated dice stats to local storage\n      localStorage.setItem(`diceValuesFavs`, this.$store.state.user.diceValuesFavs)\n      //\n      // finally check if user is registered\n      //\n      if (!this.getUserData.isAuthenticated) {\n        console.log(`Anonymous! To save results please register.`)\n      } else if (this.getUserData.isAuthenticated && this.isOnline) {\n        console.log(`User is authenticated and network is online. Syncing with firestore.`)\n        this.syncScoreWithFirestore()\n      } else if (this.getUserData.isAuthenticated && !this.isOnline &&\n        this.isGameEnded) {\n        console.log(`User is authenticated but network is offline.`)\n        // this.networkProblemDialog = true\n        this.toggleNetworkProblemDialog()\n      } else {\n        console.log(`Something went wrong in the piping system.`)\n      }\n    },\n    // if user exists add score to the account\n    syncScoreWithFirestore() {\n      this.tryAgainBtnLoading = !this.tryAgainBtnLoading\n      console.log(`Syncing score for user ${localStorage.getItem(`userName`)}`)\n      const uid = localStorage.getItem(`userUid`)\n      db.collection(this.dbUsersCollRef).where(`uid`, `==`, uid)\n        .get()\n        .then(querySnapshot => {\n          let docToUpdateId\n          querySnapshot.forEach(doc => {\n            // doc.data() is never undefined for query doc snapshots\n            if (doc.data().uid === uid) {\n              docToUpdateId = doc.id\n            }\n          })\n          return docToUpdateId\n        })\n        .then(docToUpdateId => {\n          const docRef = db.collection(this.dbUsersCollRef).doc(docToUpdateId)\n          const resultsArrayToUpdate = localStorage.getItem(`lastScoresArray`)\n          const highestScoreToUpdate = localStorage.getItem(`highestScore`)\n          const schoolScoresToUpdate = localStorage.getItem(`schoolScores`)\n          const diceValuesFavs = this.$store.state.user.diceValuesFavs\n          const combinationsFavs = localStorage.getItem(`combinationsFavs`)\n          docRef.update({\n            resultsArray: resultsArrayToUpdate,\n            schoolResultsArray: schoolScoresToUpdate,\n            hiScore: highestScoreToUpdate,\n            diceValuesFavs: diceValuesFavs,\n            combinationsFavs: combinationsFavs\n          })\n          console.log(`...updating user stats`)\n          this.tryAgainBtnLoading = !this.tryAgainBtnLoading\n          this.networkProblemDialog = false\n          // this.networkProblemDialog = !this.networkProblemDialog\n          // this.toggleNetworkProblemDialog()\n          return true\n        })\n        .catch(error => {\n          this.tryAgainBtnLoading = !this.tryAgainBtnLoading\n          console.log(`Error getting documents: `, error)\n        })\n    },\n    toggleNetworkProblemDialog () {\n      this.networkProblemDialog = !this.networkProblemDialog\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/index.scss\";\n\n.user-name-game-end {\n  span {\n    color: $color-chosen;\n  }\n}\n.message-school {\n  line-height: 1.5;\n}\n\n.network-check-background {\n  height: 3em;\n}\n\n.offline-dialog {\n  border-radius: .3em;\n  border: .1em solid $color-primary-0;\n}\n\n.offline-dialog-message {\n  padding-top: 0em;\n  font-size: 1.2em;\n  color: $color-primary-3;\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndGame.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndGame.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EndGame.vue?vue&type=template&id=7bf9d951&scoped=true&\"\nimport script from \"./EndGame.vue?vue&type=script&lang=js&\"\nexport * from \"./EndGame.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EndGame.vue?vue&type=style&index=0&id=7bf9d951&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bf9d951\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndGame.vue?vue&type=style&index=0&id=7bf9d951&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/sass-loader/lib/loader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndGame.vue?vue&type=style&index=0&id=7bf9d951&lang=scss&scoped=true&\""],"sourceRoot":""}