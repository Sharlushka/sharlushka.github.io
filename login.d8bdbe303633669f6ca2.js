(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{C25G:function(t,e,o){"use strict";var s=o("dcjx");o.n(s).a},PMrT:function(t,e,o){(t.exports=o("JPst")(!1)).push([t.i,".showPass[data-v-4933bfdf]{color:#7B1FA2}.button[data-v-4933bfdf]{line-height:2em}\n",""])},dcjx:function(t,e,o){var s=o("PMrT");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,o("SZ7m").default)("f2d04f2a",s,!0,{})},pVsz:function(t,e,o){"use strict";o.r(e);o("rE2o"),o("ioFf"),o("yt8O"),o("RW0V"),o("f3/d"),o("rGqo");var s=o("jifH"),n=o("pQVY"),a=o("L2JU"),r=o("Wcq6"),i=o.n(r),l=o("Hfx9");o("6nsN");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var g={name:"Login",components:{errorMessageDialog:s.a,showPassIcon:n.a},data:function(){return{loggingIn:!1,signingOut:!1,newUserBtnText:"Register",pageTitle:"Log In",valid:!0,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],password:"",showPass:!1,passwordRules:[function(t){return!!t||"Password is required"}],usersCollRef:"users"}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},s=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),s.forEach(function(e){u(t,e,o[e])})}return t}({},Object(a.c)(["getUserAuthState"])),mounted:function(){this.$nextTick(function(){console.log("Login page mounted.")})},methods:{testEnterKey:function(){console.log("Enter was pressed.")},login:function(){var t=this;console.log("Signing user in."),this.email&&this.password&&(this.toggleButtonLoadingState("login"),i.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(e){t.getUserDataFromDB(e.user.uid)}).then(function(){t.$store.commit("setUserIsLoggedIn",!0),t.toggleButtonLoadingState("login"),t.$router.push("/game")}).catch(function(e){return t.$store.dispatch("setErrorMessage",e),t.toggleButtonLoadingState("login"),!1}))},signOut:function(){var t=this;console.log("Signing user out."),this.toggleButtonLoadingState("signout"),i.a.auth().signOut().then(function(){t.$store.commit("setUserIsLoggedIn",!1),t.$store.commit("setUserName",void 0),localStorage.clear(),t.toggleButtonLoadingState("signout")}).catch(function(e){t.$store.dispatch("setErrorMessage",e),t.toggleButtonLoadingState("signout")})},getUserDataFromDB:function(t){var e=this;l.a.collection(this.usersCollRef).where("uid","==",t).get().then(function(e){e.forEach(function(e){e.data().uid===t&&(localStorage.setItem("userName",e.data().name),localStorage.setItem("userUid",e.data().uid),localStorage.setItem("highestScore",e.data().hiScore),localStorage.setItem("lastScoresArray",e.data().resultsArray),localStorage.setItem("schoolScores",e.data().schoolResultsArray),void 0===e.data().diceValuesFavs?localStorage.setItem("diceValuesFavs",""):localStorage.setItem("diceValuesFavs",e.data().diceValuesFavs),e.data().combinationsFavs?localStorage.setItem("combinationsFavs",e.data().combinationsFavs):localStorage.setItem("combinationsFavs",""))})}).catch(function(t){e.$store.dispatch("setErrorMessage",t),console.log("Error getting documents: ",t)})},toggleButtonLoadingState:function(t){return"login"===t?(this.loggingIn=!this.loggingIn,!0):"signout"===t?(this.signingOut=!this.signingOut,!0):(console.log("Nothing to toggle, button is ".concat("undefined"==typeof button?"undefined":c(button))),!1)},clearForm:function(){this.$refs.form.reset()}}},d=(o("C25G"),o("KHd+")),f=Object(d.a)(g,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",{staticClass:"text-xs-center",attrs:{id:"login",fluid:""}},[o("v-layout",{attrs:{column:""}},[o("errorMessageDialog"),t._v(" "),o("v-flex",{staticClass:"page-title py-4",attrs:{"d-flex":""}},[o("h1",[t._v(t._s(t.pageTitle))])]),t._v(" "),o("v-layout",{staticClass:"login-form py-4",attrs:{"justify-center":""}},[o("v-flex",{attrs:{xs10:"",sm6:"",md4:"","d-flex":"","align-center":"","py-4":""}},[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",type:"email",autocomplete:"off",required:"",color:"purple accent-4"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),o("v-layout",[o("v-flex",{attrs:{xs11:""}},[o("v-text-field",{attrs:{rules:t.passwordRules,type:t.showPass?"text":"password",label:"Password",autocomplete:"off",required:"",color:"purple accent-4"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs1:"","align-center":"","align-content-center":"","justify-center":""},on:{click:function(e){t.showPass=!t.showPass}}},[o("showPassIcon",{staticClass:"input-icon",class:{showPass:t.showPass}})],1)],1)],1)],1)],1),t._v(" "),o("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[o("v-flex",{attrs:{"d-flex":"",xs5:"",sm4:"",md2:""}},[o("v-btn",{staticClass:"white--text button",attrs:{type:"submit",loading:t.loggingIn,disabled:t.getUserAuthState,outline:"",ripple:"",color:"orange"},on:{click:function(e){return e.preventDefault(),t.login(e)}}},[o("span",[t._v("\n            login\n          ")])])],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:"",sm4:"",md2:""}},[o("v-btn",{staticClass:"white--text button",attrs:{disabled:t.valid,outline:"",ripple:"",color:"purple darken-1"},on:{click:t.clearForm}},[t._v("\n          clear\n        ")])],1),t._v(" "),o("v-flex",{attrs:{xs12:"","py-4":"","align-center":""}},[o("v-divider")],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:"",sm4:"",md2:""}},[o("v-btn",{staticClass:"white--text button",attrs:{loading:t.signingOut,disabled:!t.getUserAuthState,outline:"",ripple:"",color:"purple darken-1"},on:{click:t.signOut}},[t._v("\n          log out\n        ")])],1),t._v(" "),o("v-flex",{attrs:{"d-flex":"",xs5:"",sm4:"",md2:""}},[o("v-btn",{staticClass:"white--text button",attrs:{to:"/register",outline:"",ripple:"",color:"purple darken-1"}},[t._v("\n          "+t._s(t.newUserBtnText)+"\n        ")])],1)],1)],1)],1)},[],!1,null,"4933bfdf",null);e.default=f.exports}}]);
//# sourceMappingURL=login.d8bdbe303633669f6ca2.js.map